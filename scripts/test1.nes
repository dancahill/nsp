function vars() {
	if (string.cmp(type(_SERVER), 'table')==0) {
		print("</FONT></PRE>");
		print(
			"<SCRIPT LANGUAGE=JavaScript>\n",
			"<!--\n",
			"function showdebug() {\n",
			"	if (document.getElementById('debug').style.display=='none') {\n",
			"		document.getElementById('debug').style.display='block';\n",
			"	} else {\n",
			"		document.getElementById('debug').style.display='none';\n",
			"	}\n",
			"}\n",
			"// -->\n",
			"</SCRIPT>\n"
		);
		print("<A HREF=javascript:showdebug()>SHOW DEBUG</A>\n");
		print("<DIV ID=debug STYLE='display:none'><PRE><FONT SIZE=2>\n");
	}
	printvars();
	if (string.cmp(type(_SERVER), 'table')==0) {
		print("</FONT></PRE></DIV>\n");
	}
	return;
}

function main() {
	global pi = math.asin(1)*2;
	include("samples/_cards.nes");
	if (string.cmp(type(_SERVER), 'table')==0) {
		print("<HTML><HEAD><TITLE>NESLA WEB TEST</TITLE></HEAD><BODY>");
		print("<H1>NESLA WEB TEST</H1><PRE><FONT SIZE=2>");
	}
#	if (string.cmp(type(_SESSION), 'table')!=0) { global _SESSION = { }; }
#	_SESSION['counter']=number(_SESSION['counter'])+1;
	print("STARTING TESTS\n");
	print("----------------------------------------\n");
	include("tests/vars.nes");
	print("----------------------------------------\n");
	include("tests/string.nes");
	print("----------------------------------------\n");
	include("tests/if.nes");
	print("----------------------------------------\n");
	include("tests/scope.nes");
	print("----------------------------------------\n");
	include("tests/loops.nes");
	print("----------------------------------------\n");
	include("tests/cmp.nes");
	print("----------------------------------------\n");
	include("tests/math.nes");
	print("----------------------------------------\n");
	if (string.cmp(type(_SERVER), 'table')==0) {
		sqlquery('_q', "SELECT * FROM nullgs_sessions");
		dirlist('_d', _filepath);
		print("----------------------------------------\n");
	}
	global CARDS=0;
	global _SESSION={};
	global tab=0;
	print("[", date(), " ", time(), "]\n");
	var tm=1170309600;
	print("[", date(tm), " ", time(tm), "]\n");
	print("FINISHED TESTS\n");
	print("time = ", runtime(), " seconds\n");
	print("----------------------------------------\n");
	if (string.cmp(type(base64), 'table')==0) {
		print("BASE 64 TEST\n");
		global bx = { p="stuff:null", e="c3R1ZmY6bnVsbA==" };
		global by = { p="null:stuff", e="bnVsbDpzdHVmZg==" };
		print("[", base64.decode(bx.e), "][", base64.encode(bx.p, 76), "]\n");
		print("[", base64.decode(by.e), "][", base64.encode(by.p, 76), "]\n");
	}
	vars();
	if (string.cmp(type(_SERVER), 'table')==0) {
		print("</BODY></HTML>");
	}
	return;
}
main();
