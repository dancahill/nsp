#!/usr/bin/nesla
if (type(expect)!='function') include("_expect.nes");
function testcmp() {
	if (math.asin) {
		local pi = math.asin(1)*2;
	} else {
		local pi = 3.1415926535897932384626433832795029;
	}
	expect("2==2",  1,   2==2);
	expect("2<=2",  1,   2<=2);
	expect("2>=2",  1,   2>=2);
	expect("2!=2",  0,   2!=2);
	expect("2<2",   0,   2<2);
	expect("2>2",   0,   2>2);
	expect("42",    42,  (42));
	expect("21",    21,  21);
	expect("pi-pi", 0,   pi-pi);
	expect("pi/pi", 1,   pi/pi);
	expect("pi%pi", 0,   pi%pi);
	expect("pi&pi", 3,   pi&pi);
	expect("pi|pi", 3,   pi|pi);
	expect("pi^pi", 0,   pi^pi);
	expect("3&&4",  1,   3&&4);
	expect("3||4",  1,   3||4);

	var x=0;   if (x==false) x=false; else x=true; expect("(x=0)",   false, x);
	var x=1;   if (x==false) x=false; else x=true; expect("(x=1)",   true,  x);
	var x="";  if (x==false) x=false; else x=true; expect("(x='')",  false, x);
	var x="x"; if (x==false) x=false; else x=true; expect("(x='x')", true,  x);

	expect("x==null", 0, x==null);
	expect("y==null", 1, y==null);
	expect("x!=null", 1, x!=null);
	expect("y!=null", 0, y!=null);

	return;
}
testcmp();
