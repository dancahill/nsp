<!DOCTYPE html>
<html>
<head>
<title>NullLogic - NSP Help</title>
<meta http-equiv="content-type" content="text/html; charset=us-ascii">
<meta http-equiv="keywords" content="nulllogic, nsp, groupware, webmail">
<meta http-equiv="description" content="NSP is the script language for C programmers.">
<meta name='viewport' content='width=600'>
<link rel="shortcut icon" href="/favicon.ico">
<style type="text/css">





#_container {
	min-height: 100%;
	position: absolute;
	top: 0;
	bottom: 0;
	left: 0;
	right: 0;
}

#header {
	position: absolute;
	background-color: #003399;
	top: 0;
	left: 0;
	right: 0;
	height: 40px;
	border-radius: 0px 0px 15px 0px;
	text-align: center;
}

#sidebar {
	background-color: #003399;
	position: absolute;
	top: 40px;
	width: 160px;
	border-radius: 0px 0px 15px 0px;
	-padding: 15px;
	padding-left: 10px;
	padding-right: 10px;
	spacing: 5px;
	height: calc(100% - 40px);
}

	#sidebar a {
		margin-top: 0pt;
		font-weight: normal;
		font-size: 10pt;
		margin-bottom: 0pt;
		color: #ffffff;
		font-family: Verdana, Arial, Helvetica, sans-serif;
		text-decoration: none;
	}

	#sidebar p {
		margin-top: 0pt;
		font-weight: normal;
		font-size: 10pt;
		margin-bottom: 0pt;
		color: #ffffff;
		font-family: Verdana, Arial, Helvetica, sans-serif;
		text-decoration: none;
	}

	#sidebar h2 {
		font-weight: bold;
		font-size: 10pt;
		color: #000000;
		font-family: Verdana, Arial, Helvetica, sans-serif;
	}

#main {
	position: absolute;
	top: 40px;
	left: 180px;
	bottom: 30px;
	padding-left: 5px;
	padding-right: 5px;
	right: 0px;
	margin: 0 auto;
	height: auto;
	overflow: auto;
}

#footer {
	position: absolute;
	height: 30px;
	left: 180px;
	bottom: 0px;
	--width: calc(100% - 151px);
}






a             { color: #0000ff; text-decoration: underline }
a.smenu       { color: #ffffff; text-decoration: none; }
a.smenu:hover { color: #399cde; text-decoration: none; }
p { text-align:justify }

.globalmenu {
	font-size: 10pt; color: #ffffff; font-family: verdana, arial, helvetica, sans-serif; text-decoration: none
}
.sidemenu {
	margin-top: 0pt; font-weight: normal; font-size: 10pt; margin-bottom: 0pt; color: #ffffff; font-family: verdana, arial, helvetica, sans-serif; text-decoration: none
}
.welcome {
	margin-top: 4pt; font-weight: bold; font-size: 10pt; color: #000066; font-family: verdana, arial, helvetica, sans-serif; text-decoration: none
}
.lefttitle {
	font-weight: bold; font-size: 10pt; color: #000000; font-family: verdana, arial, helvetica, sans-serif
}

body {
	margin-top: 0px; font-size: 10pt; background: #ffffff; margin-left: 0px; color: #000000; font-family: verdana, arial, helvetica, sans-serif
}
h1 {
	font-weight: bold; color: #000000; font-family: verdana, arial, helvetica, sans-serif
}
h2 {
	font-weight: bold; color: #000000; font-family: verdana, arial, helvetica, sans-serif
}
h3 {
	font-weight: bold; color: #000000; font-family: verdana, arial, helvetica, sans-serif
}
h4 {
	font-weight: bold; color: #000000; font-family: verdana, arial, helvetica, sans-serif
}
h5 {
	font-weight: bold; color: #000000; font-family: verdana, arial, helvetica, sans-serif
}
h6 {
	font-weight: bold; color: #000000; font-family: verdana, arial, helvetica, sans-serif
}
h2 {
	margin-top: 0px; font-size: 16pt; margin-bottom: 0px
}
p {
	font-size: 10pt; margin-left: 3pt; font-family: verdana, arial, helvetica, sans-serif
}

.justify {
	text-align: justify
}
.tbar {
	font-size: 8pt; color: #505050; font-family: geneva, arial, verdana, sans-serif; background-color: #c0c0c0; text-decoration: none
}
a {
	color: #0000ff; text-decoration: none
}
a:hover {
	color: #399cde; text-decoration: underline
}
body {
	color: #000000
}

table {
	border-collapse: collapse;
	color: #000000;
}
th {
	font-size: 12px; color: #000000; font-style: normal; font-family: arial, helvetica, sans-serif;
}
td {
	font-size: 12px; color: #000000; font-style: normal; font-family: arial, helvetica, sans-serif;
}

table.syntax {
	width: 100%;
	background-color: #e0e0e0;
	padding:5px;
	spacing:5px;
}
table.syntax th {
	text-align: left;
}

table.methods {
	border-collapse: collapse;
	width: 100%;
	background-color: #ffffff;
	padding:0px;
	spacing:0px;
	color: #000000;
}
table.methods th {
	border: 1px solid black;
	text-align: left;
	background-color: #e0e0e0;
	color: #000000;
}
table.methods td {
	border: 1px solid black;
	background-color: #ffffff;
	color: #000000;
	vertical-align: top;
}

table.examples {
	width: 100%;
	background-color: #e0e0e0;
	padding:5px;
	spacing:5px;
}

div.nspcode {
	font-family: monospace;
	font-size: 12px;
	white-space: pre;
}

code {
	font-family: monospace;
	font-size: 12px;
	white-space: pre;
}

</style>
<script type='text/javascript' src='https://nulllogic.ca/scripts/srcformat.js'></script>
<script type='text/javascript'>
function showpage(c,p) {
	if (document.all) {
		var coll=document.all.tags("DIV");
	} else {
		var coll=document.getElementsByTagName("DIV");
	}
	if (coll==null) return;
	for (i=0;i<coll.length;i++) {
		if (coll[i].id=='c'+c+'m') {
			coll[i].style.display='block';
		} else if (coll[i].id=='c'+c+'p'+p) {
			coll[i].style.display='block';
		} else if (coll[i].id.substr(0, 1)=='c') {
			coll[i].style.display='none';
		}
	}
}
</script>
</head>
<body bgcolor="#ffffff" text="#000000" link="#000066" vlink="#606060" style="margin:0" onload='FormatCodeDivs();'>
<div id='_container'>
	<div id='header'>
		<h2><a href="https://nulllogic.ca/nsp/" class="smenu">NSP Language Reference</a></h2>
	</div>
</div>
 <div id='sidebar'>
<a class="smenu" href="#c1p0" onclick="showpage('1', '0'); return false;"><nobr>Introduction</nobr></a><br>
<div id=c1m style='display: block'>
<a class="smenu" href="#c1p_intro_keywords" onclick="showpage('1', '_intro_keywords'); return false;">&nbsp;&nbsp;keywords</a><br>
<a class="smenu" href="#c1p_intro_operators" onclick="showpage('1', '_intro_operators'); return false;">&nbsp;&nbsp;operators</a><br>
<a class="smenu" href="#c1p_intro_objects" onclick="showpage('1', '_intro_objects'); return false;">&nbsp;&nbsp;objects</a><br>
</div>
<a class="smenu" href="#c2p0" onclick="showpage('2', '0'); return false;"><nobr>Functions - core</nobr></a><br>
<div id=c2m style='display: block'>
<a class="smenu" href="#c2p_core_copy" onclick="showpage('2', '_core_copy'); return false;">&nbsp;&nbsp;copy()</a><br>
<a class="smenu" href="#c2p_core_eval" onclick="showpage('2', '_core_eval'); return false;">&nbsp;&nbsp;eval()</a><br>
<a class="smenu" href="#c2p_core_exec" onclick="showpage('2', '_core_exec'); return false;">&nbsp;&nbsp;exec()</a><br>
<a class="smenu" href="#c2p_core_serialize" onclick="showpage('2', '_core_serialize'); return false;">&nbsp;&nbsp;serialize()</a><br>
<a class="smenu" href="#c2p_core_include" onclick="showpage('2', '_core_include'); return false;">&nbsp;&nbsp;include()</a><br>
<a class="smenu" href="#c2p_core_print" onclick="showpage('2', '_core_print'); return false;">&nbsp;&nbsp;print()</a><br>
<a class="smenu" href="#c2p_core_runtime" onclick="showpage('2', '_core_runtime'); return false;">&nbsp;&nbsp;runtime()</a><br>
<a class="smenu" href="#c2p_core_sizeof" onclick="showpage('2', '_core_sizeof'); return false;">&nbsp;&nbsp;sizeof()</a><br>
<a class="smenu" href="#c2p_core_sleep" onclick="showpage('2', '_core_sleep'); return false;">&nbsp;&nbsp;sleep()</a><br>
<a class="smenu" href="#c2p_core_system" onclick="showpage('2', '_core_system'); return false;">&nbsp;&nbsp;system()</a><br>
<a class="smenu" href="#c2p_core_tonumber" onclick="showpage('2', '_core_tonumber'); return false;">&nbsp;&nbsp;tonumber()</a><br>
<a class="smenu" href="#c2p_core_tostring" onclick="showpage('2', '_core_tostring'); return false;">&nbsp;&nbsp;tostring()</a><br>
<a class="smenu" href="#c2p_core_typeof" onclick="showpage('2', '_core_typeof'); return false;">&nbsp;&nbsp;typeof()</a><br>
<a class="smenu" href="#c2p_core_write" onclick="showpage('2', '_core_write'); return false;">&nbsp;&nbsp;write()</a><br>
</div>
<a class="smenu" href="#c3p0" onclick="showpage('3', '0'); return false;"><nobr>Functions - file</nobr></a><br>
<div id=c3m style='display: block'>
<a class="smenu" href="#c3p_lib_file_append" onclick="showpage('3', '_lib_file_append'); return false;">&nbsp;&nbsp;lib.file.append()</a><br>
<a class="smenu" href="#c3p_lib_file_mkdir" onclick="showpage('3', '_lib_file_mkdir'); return false;">&nbsp;&nbsp;lib.file.mkdir()</a><br>
<a class="smenu" href="#c3p_lib_file_readall" onclick="showpage('3', '_lib_file_readall'); return false;">&nbsp;&nbsp;lib.file.readall()</a><br>
<a class="smenu" href="#c3p_lib_file_rename" onclick="showpage('3', '_lib_file_rename'); return false;">&nbsp;&nbsp;lib.file.rename()</a><br>
<a class="smenu" href="#c3p_lib_file_stat" onclick="showpage('3', '_lib_file_stat'); return false;">&nbsp;&nbsp;lib.file.stat()</a><br>
<a class="smenu" href="#c3p_lib_file_unlink" onclick="showpage('3', '_lib_file_unlink'); return false;">&nbsp;&nbsp;lib.file.unlink()</a><br>
<a class="smenu" href="#c3p_lib_file_writeall" onclick="showpage('3', '_lib_file_writeall'); return false;">&nbsp;&nbsp;lib.file.writeall()</a><br>
</div>
<a class="smenu" href="#c4p0" onclick="showpage('4', '0'); return false;"><nobr>Functions - io</nobr></a><br>
<div id=c4m style='display: block'>
<a class="smenu" href="#c4p_lib_io_gets" onclick="showpage('4', '_lib_io_gets'); return false;">&nbsp;&nbsp;lib.io.gets()</a><br>
<a class="smenu" href="#c4p_lib_io_flush" onclick="showpage('4', '_lib_io_flush'); return false;">&nbsp;&nbsp;lib.io.flush()</a><br>
<a class="smenu" href="#c4p_lib_io_print" onclick="showpage('4', '_lib_io_print'); return false;">&nbsp;&nbsp;lib.io.print()</a><br>
<a class="smenu" href="#c4p_lib_io_write" onclick="showpage('4', '_lib_io_write'); return false;">&nbsp;&nbsp;lib.io.write()</a><br>
</div>
<a class="smenu" href="#c5p0" onclick="showpage('5', '0'); return false;"><nobr>Functions - math</nobr></a><br>
<div id=c5m style='display: block'>
<a class="smenu" href="#c5p_lib_math_abs" onclick="showpage('5', '_lib_math_abs'); return false;">&nbsp;&nbsp;lib.math.abs()</a><br>
<a class="smenu" href="#c5p_lib_math_acos" onclick="showpage('5', '_lib_math_acos'); return false;">&nbsp;&nbsp;lib.math.acos()</a><br>
<a class="smenu" href="#c5p_lib_math_asin" onclick="showpage('5', '_lib_math_asin'); return false;">&nbsp;&nbsp;lib.math.asin()</a><br>
<a class="smenu" href="#c5p_lib_math_atan" onclick="showpage('5', '_lib_math_atan'); return false;">&nbsp;&nbsp;lib.math.atan()</a><br>
<a class="smenu" href="#c5p_lib_math_atan2" onclick="showpage('5', '_lib_math_atan2'); return false;">&nbsp;&nbsp;lib.math.atan2()</a><br>
<a class="smenu" href="#c5p_lib_math_ceil" onclick="showpage('5', '_lib_math_ceil'); return false;">&nbsp;&nbsp;lib.math.ceil()</a><br>
<a class="smenu" href="#c5p_lib_math_cos" onclick="showpage('5', '_lib_math_cos'); return false;">&nbsp;&nbsp;lib.math.cos()</a><br>
<a class="smenu" href="#c5p_lib_math_cosh" onclick="showpage('5', '_lib_math_cosh'); return false;">&nbsp;&nbsp;lib.math.cosh()</a><br>
<a class="smenu" href="#c5p_lib_math_exp" onclick="showpage('5', '_lib_math_exp'); return false;">&nbsp;&nbsp;lib.math.exp()</a><br>
<a class="smenu" href="#c5p_lib_math_floor" onclick="showpage('5', '_lib_math_floor'); return false;">&nbsp;&nbsp;lib.math.floor()</a><br>
<a class="smenu" href="#c5p_lib_math_log" onclick="showpage('5', '_lib_math_log'); return false;">&nbsp;&nbsp;lib.math.log()</a><br>
<a class="smenu" href="#c5p_lib_math_log10" onclick="showpage('5', '_lib_math_log10'); return false;">&nbsp;&nbsp;lib.math.log10()</a><br>
<a class="smenu" href="#c5p_lib_math_rand" onclick="showpage('5', '_lib_math_rand'); return false;">&nbsp;&nbsp;lib.math.rand()</a><br>
<a class="smenu" href="#c5p_lib_math_sin" onclick="showpage('5', '_lib_math_sin'); return false;">&nbsp;&nbsp;lib.math.sin()</a><br>
<a class="smenu" href="#c5p_lib_math_sinh" onclick="showpage('5', '_lib_math_sinh'); return false;">&nbsp;&nbsp;lib.math.sinh()</a><br>
<a class="smenu" href="#c5p_lib_math_sqrt" onclick="showpage('5', '_lib_math_sqrt'); return false;">&nbsp;&nbsp;lib.math.sqrt()</a><br>
<a class="smenu" href="#c5p_lib_math_tan" onclick="showpage('5', '_lib_math_tan'); return false;">&nbsp;&nbsp;lib.math.tan()</a><br>
<a class="smenu" href="#c5p_lib_math_tanh" onclick="showpage('5', '_lib_math_tanh'); return false;">&nbsp;&nbsp;lib.math.tanh()</a><br>
</div>
<a class="smenu" href="#c6p0" onclick="showpage('6', '0'); return false;"><nobr>Functions - string</nobr></a><br>
<div id=c6m style='display: block'>
<a class="smenu" href="#c6p_lib_string_atoi" onclick="showpage('6', '_lib_string_atoi'); return false;">&nbsp;&nbsp;lib.string.atoi()</a><br>
<a class="smenu" href="#c6p_lib_string_cat" onclick="showpage('6', '_lib_string_cat'); return false;">&nbsp;&nbsp;lib.string.cat()</a><br>
<a class="smenu" href="#c6p_lib_string_cmp" onclick="showpage('6', '_lib_string_cmp'); return false;">&nbsp;&nbsp;lib.string.cmp()</a><br>
<a class="smenu" href="#c6p_lib_string_icmp" onclick="showpage('6', '_lib_string_icmp'); return false;">&nbsp;&nbsp;lib.string.icmp()</a><br>
<a class="smenu" href="#c6p_lib_string_istr" onclick="showpage('6', '_lib_string_istr'); return false;">&nbsp;&nbsp;lib.string.istr()</a><br>
<a class="smenu" href="#c6p_lib_string_itoa" onclick="showpage('6', '_lib_string_itoa'); return false;">&nbsp;&nbsp;lib.string.itoa()</a><br>
<a class="smenu" href="#c6p_lib_string_join" onclick="showpage('6', '_lib_string_join'); return false;">&nbsp;&nbsp;lib.string.join()</a><br>
<a class="smenu" href="#c6p_lib_string_len" onclick="showpage('6', '_lib_string_len'); return false;">&nbsp;&nbsp;lib.string.len()</a><br>
<a class="smenu" href="#c6p_lib_string_ncmp" onclick="showpage('6', '_lib_string_ncmp'); return false;">&nbsp;&nbsp;lib.string.ncmp()</a><br>
<a class="smenu" href="#c6p_lib_string_nicmp" onclick="showpage('6', '_lib_string_nicmp'); return false;">&nbsp;&nbsp;lib.string.nicmp()</a><br>
<a class="smenu" href="#c6p_lib_string_replace" onclick="showpage('6', '_lib_string_replace'); return false;">&nbsp;&nbsp;lib.string.replace()</a><br>
<a class="smenu" href="#c6p_lib_string_split" onclick="showpage('6', '_lib_string_split'); return false;">&nbsp;&nbsp;lib.string.split()</a><br>
<a class="smenu" href="#c6p_lib_string_str" onclick="showpage('6', '_lib_string_str'); return false;">&nbsp;&nbsp;lib.string.str()</a><br>
<a class="smenu" href="#c6p_lib_string_sub" onclick="showpage('6', '_lib_string_sub'); return false;">&nbsp;&nbsp;lib.string.sub()</a><br>
<a class="smenu" href="#c6p_lib_string_tolower" onclick="showpage('6', '_lib_string_tolower'); return false;">&nbsp;&nbsp;lib.string.tolower()</a><br>
<a class="smenu" href="#c6p_lib_string_toupper" onclick="showpage('6', '_lib_string_toupper'); return false;">&nbsp;&nbsp;lib.string.toupper()</a><br>
</div>
<a class="smenu" href="#c7p0" onclick="showpage('7', '0'); return false;"><nobr>Functions - table</nobr></a><br>
<div id=c7m style='display: block'>
<a class="smenu" href="#c7p_lib_table_iname" onclick="showpage('7', '_lib_table_iname'); return false;">&nbsp;&nbsp;lib.table.iname()</a><br>
<a class="smenu" href="#c7p_lib_table_ival" onclick="showpage('7', '_lib_table_ival'); return false;">&nbsp;&nbsp;lib.table.ival()</a><br>
<a class="smenu" href="#c7p_lib_table_sortbykey" onclick="showpage('7', '_lib_table_sortbykey'); return false;">&nbsp;&nbsp;lib.table.sortbykey()</a><br>
<a class="smenu" href="#c7p_lib_table_sortbyname" onclick="showpage('7', '_lib_table_sortbyname'); return false;">&nbsp;&nbsp;lib.table.sortbyname()</a><br>
<a class="smenu" href="#c7p_lib_table_zlink" onclick="showpage('7', '_lib_table_zlink'); return false;">&nbsp;&nbsp;lib.table.zlink()</a><br>
</div>
<a class="smenu" href="#c8p0" onclick="showpage('8', '0'); return false;"><nobr>Functions - time</nobr></a><br>
<div id=c8m style='display: block'>
<a class="smenu" href="#c8p_lib_time_asctime" onclick="showpage('8', '_lib_time_asctime'); return false;">&nbsp;&nbsp;lib.time.asctime()</a><br>
<a class="smenu" href="#c8p_lib_time_gettimeofday" onclick="showpage('8', '_lib_time_gettimeofday'); return false;">&nbsp;&nbsp;lib.time.gettimeofday()</a><br>
<a class="smenu" href="#c8p_lib_time_gmtime" onclick="showpage('8', '_lib_time_gmtime'); return false;">&nbsp;&nbsp;lib.time.gmtime()</a><br>
<a class="smenu" href="#c8p_lib_time_localtime" onclick="showpage('8', '_lib_time_localtime'); return false;">&nbsp;&nbsp;lib.time.localtime()</a><br>
<a class="smenu" href="#c8p_lib_time_mktime" onclick="showpage('8', '_lib_time_mktime'); return false;">&nbsp;&nbsp;lib.time.mktime()</a><br>
<a class="smenu" href="#c8p_lib_time_now" onclick="showpage('8', '_lib_time_now'); return false;">&nbsp;&nbsp;lib.time.now()</a><br>
<a class="smenu" href="#c8p_lib_time_sqltime" onclick="showpage('8', '_lib_time_sqltime'); return false;">&nbsp;&nbsp;lib.time.sqltime()</a><br>
</div>
<a class="smenu" href="#c9p0" onclick="showpage('9', '0'); return false;"><nobr>Libraries - data</nobr></a><br>
<div id=c9m style='display: block'>
<a class="smenu" href="#c9p_lib_data_cdb_read" onclick="showpage('9', '_lib_data_cdb_read'); return false;">&nbsp;&nbsp;lib.data.cdb.read()</a><br>
<a class="smenu" href="#c9p_lib_data_cdb_write" onclick="showpage('9', '_lib_data_cdb_write'); return false;">&nbsp;&nbsp;lib.data.cdb.write()</a><br>
<a class="smenu" href="#c9p_lib_data_dbf_reader" onclick="showpage('9', '_lib_data_dbf_reader'); return false;">&nbsp;&nbsp;lib.data.dbf.reader()</a><br>
<a class="smenu" href="#c9p_lib_data_firebird_client" onclick="showpage('9', '_lib_data_firebird_client'); return false;">&nbsp;&nbsp;lib.data.firebird.client()</a><br>
<a class="smenu" href="#c9p_lib_data_firebird_escape" onclick="showpage('9', '_lib_data_firebird_escape'); return false;">&nbsp;&nbsp;lib.data.firebird.escape()</a><br>
<a class="smenu" href="#c9p_lib_data_mysql_query" onclick="showpage('9', '_lib_data_mysql_query'); return false;">&nbsp;&nbsp;lib.data.mysql.query()</a><br>
<a class="smenu" href="#c9p_lib_data_odbc_client" onclick="showpage('9', '_lib_data_odbc_client'); return false;">&nbsp;&nbsp;lib.data.odbc.client()</a><br>
<a class="smenu" href="#c9p_lib_data_pgsql_query" onclick="showpage('9', '_lib_data_pgsql_query'); return false;">&nbsp;&nbsp;lib.data.pgsql.query()</a><br>
<a class="smenu" href="#c9p_lib_data_sqlite3_client" onclick="showpage('9', '_lib_data_sqlite3_client'); return false;">&nbsp;&nbsp;lib.data.sqlite3.client()</a><br>
<a class="smenu" href="#c9p_lib_data_sqlite3_escape" onclick="showpage('9', '_lib_data_sqlite3_escape'); return false;">&nbsp;&nbsp;lib.data.sqlite3.escape()</a><br>
<a class="smenu" href="#c9p_lib_data_xml_read" onclick="showpage('9', '_lib_data_xml_read'); return false;">&nbsp;&nbsp;lib.data.xml.read()</a><br>
</div>
<a class="smenu" href="#c10p0" onclick="showpage('10', '0'); return false;"><nobr>Libraries - ext</nobr></a><br>
<div id=c10m style='display: block'>
<a class="smenu" href="#c10p_libext_base64_decode" onclick="showpage('10', '_libext_base64_decode'); return false;">&nbsp;&nbsp;lib.base64.decode()</a><br>
<a class="smenu" href="#c10p_libext_base64_encode" onclick="showpage('10', '_libext_base64_encode'); return false;">&nbsp;&nbsp;lib.base64.encode()</a><br>
<a class="smenu" href="#c10p_libext_dirlist" onclick="showpage('10', '_libext_dirlist'); return false;">&nbsp;&nbsp;lib.dirlist()</a><br>
<a class="smenu" href="#c10p_libext_rot13" onclick="showpage('10', '_libext_rot13'); return false;">&nbsp;&nbsp;lib.rot13()</a><br>
</div>
<a class="smenu" href="#c11p0" onclick="showpage('11', '0'); return false;"><nobr>Libraries - net</nobr></a><br>
<div id=c11m style='display: block'>
<a class="smenu" href="#c11p_lib_net_dns_name2addr" onclick="showpage('11', '_lib_net_dns_name2addr'); return false;">&nbsp;&nbsp;lib.net.dns.name2addr()</a><br>
<a class="smenu" href="#c11p_lib_net_dns_addr2name" onclick="showpage('11', '_lib_net_dns_addr2name'); return false;">&nbsp;&nbsp;lib.net.dns.addr2name()</a><br>
<a class="smenu" href="#c11p_lib_net_ftp_client" onclick="showpage('11', '_lib_net_ftp_client'); return false;">&nbsp;&nbsp;lib.net.ftp.client()</a><br>
<a class="smenu" href="#c11p_lib_net_http_client" onclick="showpage('11', '_lib_net_http_client'); return false;">&nbsp;&nbsp;lib.net.http.client()</a><br>
<a class="smenu" href="#c11p_lib_net_ldap_search" onclick="showpage('11', '_lib_net_ldap_search'); return false;">&nbsp;&nbsp;lib.net.ldap.search()</a><br>
<a class="smenu" href="#c11p_lib_net_mime_read" onclick="showpage('11', '_lib_net_mime_read'); return false;">&nbsp;&nbsp;lib.net.mime.read()</a><br>
<a class="smenu" href="#c11p_lib_net_mime_write" onclick="showpage('11', '_lib_net_mime_write'); return false;">&nbsp;&nbsp;lib.net.mime.write()</a><br>
<a class="smenu" href="#c11p_lib_net_mime_decode_qp" onclick="showpage('11', '_lib_net_mime_decode_qp'); return false;">&nbsp;&nbsp;lib.net.mime.decode_qp()</a><br>
<a class="smenu" href="#c11p_lib_net_mime_decode_rfc2047" onclick="showpage('11', '_lib_net_mime_decode_rfc2047'); return false;">&nbsp;&nbsp;lib.net.mime.decode_rfc2047()</a><br>
<a class="smenu" href="#c11p_lib_net_pop3_client" onclick="showpage('11', '_lib_net_pop3_client'); return false;">&nbsp;&nbsp;lib.net.pop3.client()</a><br>
<a class="smenu" href="#c11p_lib_net_smtp_client" onclick="showpage('11', '_lib_net_smtp_client'); return false;">&nbsp;&nbsp;lib.net.smtp.client()</a><br>
<a class="smenu" href="#c11p_lib_net_ssh_auth" onclick="showpage('11', '_lib_net_ssh_auth'); return false;">&nbsp;&nbsp;lib.net.ssh.auth()</a><br>
<a class="smenu" href="#c11p_lib_net_ssh_close" onclick="showpage('11', '_lib_net_ssh_close'); return false;">&nbsp;&nbsp;lib.net.ssh.close()</a><br>
<a class="smenu" href="#c11p_lib_net_ssh_cmd" onclick="showpage('11', '_lib_net_ssh_cmd'); return false;">&nbsp;&nbsp;lib.net.ssh.cmd()</a><br>
<a class="smenu" href="#c11p_lib_net_ssh_hostkey" onclick="showpage('11', '_lib_net_ssh_hostkey'); return false;">&nbsp;&nbsp;lib.net.ssh.hostkey()</a><br>
<a class="smenu" href="#c11p_lib_net_ssh_open" onclick="showpage('11', '_lib_net_ssh_open'); return false;">&nbsp;&nbsp;lib.net.ssh.open()</a><br>
<a class="smenu" href="#c11p_lib_net_ssh_sftp_get" onclick="showpage('11', '_lib_net_ssh_sftp_get'); return false;">&nbsp;&nbsp;lib.net.ssh.sftp.get()</a><br>
<a class="smenu" href="#c11p_lib_net_ssh_sftp_ls" onclick="showpage('11', '_lib_net_ssh_sftp_ls'); return false;">&nbsp;&nbsp;lib.net.ssh.sftp.ls()</a><br>
<a class="smenu" href="#c11p_lib_net_ssh_sftp_mkdir" onclick="showpage('11', '_lib_net_ssh_sftp_mkdir'); return false;">&nbsp;&nbsp;lib.net.ssh.sftp.mkdir()</a><br>
<a class="smenu" href="#c11p_lib_net_ssh_sftp_put" onclick="showpage('11', '_lib_net_ssh_sftp_put'); return false;">&nbsp;&nbsp;lib.net.ssh.sftp.put()</a><br>
<a class="smenu" href="#c11p_lib_net_ssh_sftp_put_mem" onclick="showpage('11', '_lib_net_ssh_sftp_put_mem'); return false;">&nbsp;&nbsp;lib.net.ssh.sftp.put_mem()</a><br>
<a class="smenu" href="#c11p_lib_net_ssh_sftp_rename" onclick="showpage('11', '_lib_net_ssh_sftp_rename'); return false;">&nbsp;&nbsp;lib.net.ssh.sftp.rename()</a><br>
<a class="smenu" href="#c11p_lib_net_ssh_sftp_rmdir" onclick="showpage('11', '_lib_net_ssh_sftp_rmdir'); return false;">&nbsp;&nbsp;lib.net.ssh.sftp.rmdir()</a><br>
<a class="smenu" href="#c11p_lib_net_ssh_sftp_unlink" onclick="showpage('11', '_lib_net_ssh_sftp_unlink'); return false;">&nbsp;&nbsp;lib.net.ssh.sftp.unlink()</a><br>
<a class="smenu" href="#c11p_lib_net_tcp_socket" onclick="showpage('11', '_lib_net_tcp_socket'); return false;">&nbsp;&nbsp;lib.net.tcp.socket()</a><br>
<a class="smenu" href="#c11p_lib_net_tcp_accept" onclick="showpage('11', '_lib_net_tcp_accept'); return false;">&nbsp;&nbsp;lib.net.tcp.accept()</a><br>
<a class="smenu" href="#c11p_lib_net_tcp_bind" onclick="showpage('11', '_lib_net_tcp_bind'); return false;">&nbsp;&nbsp;lib.net.tcp.bind()</a><br>
<a class="smenu" href="#c11p_lib_net_tcp_close" onclick="showpage('11', '_lib_net_tcp_close'); return false;">&nbsp;&nbsp;lib.net.tcp.close()</a><br>
<a class="smenu" href="#c11p_lib_net_tcp_gets" onclick="showpage('11', '_lib_net_tcp_gets'); return false;">&nbsp;&nbsp;lib.net.tcp.gets()</a><br>
<a class="smenu" href="#c11p_lib_net_tcp_info" onclick="showpage('11', '_lib_net_tcp_info'); return false;">&nbsp;&nbsp;lib.net.tcp.info()</a><br>
<a class="smenu" href="#c11p_lib_net_tcp_open" onclick="showpage('11', '_lib_net_tcp_open'); return false;">&nbsp;&nbsp;lib.net.tcp.open()</a><br>
<a class="smenu" href="#c11p_lib_net_tcp_read" onclick="showpage('11', '_lib_net_tcp_read'); return false;">&nbsp;&nbsp;lib.net.tcp.read()</a><br>
<a class="smenu" href="#c11p_lib_net_tcp_write" onclick="showpage('11', '_lib_net_tcp_write'); return false;">&nbsp;&nbsp;lib.net.tcp.write()</a><br>
</div>
<a class="smenu" href="#c12p0" onclick="showpage('12', '0'); return false;"><nobr>C API</nobr></a><br>
		<hr noshade size="1" width="130"> </div>
 <div id='main'>
<div id=c1p0 style='display: block'><h1>1 - Introduction</h1>
<p>
I suck at writing documentation, so this will be short and bitter.  For working
samples, check out scripts/tests/*.ns
</p>
<p>
Nesla's earliest lines of code were derived from all the configuration file
parsers I kept writing over and over, and was never happy with.  With the
hassle of writing new functions to deal with different files, and adding
callback functions to deal with subsections, and _then_ taking the parsed
data and making that data accessible to other loaded functions and modules,
not to mention the whole memory management part, and the need to keep track
of not only the name and type of variable, but also the size...  Well, I guess
I'm just lucky I have a sense of humour.
</p>
<p>
So here was a goal: A flexible config parser, a simple and universal data
storage model, a short and simple command set, a zero effort memory management
system that didn't suck, and a C api that wouldn't be painful or difficult to
use in other projects.  Whether or not it became a fully functional scripting
language of its own was entirely incidental.  What I ended up with is the Nesla
core library; the scripting language for C programmers.
</p>
<p>
Syntactically, Nesla probably looks more like javascript than it does any other
language.  Use of the word 'object' may be less than 100% accurate, there are
no properties, methods, events, or classes in the javascript sense, but the C
syntax rules are nearly identical.  Nesla is not an emulation of javascript,
but both language designs do agree that C syntax is good and dollar signs are
ugly.
</p>
</div><div id="c1p_intro_keywords" style="display: block"><h2>Keywords</h2>

<p>
break continue return function global local var if else for do while exit
</p>
<p>
Working code looks a little like the following sample.
</p>
<div class='nspcode'>	function demo(arg1) {
		global x=1;
		// you don't actually need local or var, but it makes the code clearer
		local y=2;
		var z=3;

		for (i=0;i&lt;10;i++) {
			if (i&lt;5) {
				print("less than half ", i, "\n");
			} else if (i==5) {
				print("half\n");
			} else {
				print("more than half ", i, "\n");
			}
			if (i==arg1) break;
		}
		return;
	}
	demo(8);
</div>
<p>
break (accepts an optional unbracketed number arg to define the number of levels to break)<br>
still need to add switch and goto..
</p>
</div><div id="c1p_intro_operators" style="display: block"><h2>Operators</h2>

<p>
= + ++ += - -- -= * *= / /= == != &lt;= >= &lt; > % &amp; | ^ &amp;&amp; || !
</p>
<p>
Strings can also be handled using the slightly shorter list of ops: = + += == != &lt;= >= &lt; >
</p>
<p>
The statement <B>var x="a"+"b";</B> will set x to "ab".
</p>
<p>
Tables have considerably less ops: = {}
</p>
<div class='nspcode'>
function subf() { return 69; }
var pi = math.asin(1)*2;
var table = {
	{ a1="x", b = pi, [12]=41, [1]=42, 43, 'blah', subf() },
	{ "x", 'y', x = 41, 42, 43, 'blah', [5]=12, heh=";-)" }
};
</div>
<p>
setting a var's value to null will completely free the value and effectively make the var non-existant
</p>
</div><div id="c1p_intro_objects" style="display: block"><h1>Objects And Classes</h1>
<p>
<b>OOPS</b>
So here's the deal on 'Object Oriented Programming'.  I don't get it.  I'm not
saying it's bad or that people who do it are deviants.  I'm just not sure what
the working definition of OO is these days.  Nesla's storage system is entirely
object-based, but that doesn't make the language object oriented.  I added a
'this' variable so functions could infer the context in which they were called.
Does this make Nesla an OO language?  Consider the following code:
</p>
<div class='nspcode'>	class str {
		function str(val) { this.value=tostring(val); };
		function size()   { return sizeof(this.value); };
		function lower()  { return string.tolower(this.value); };
		function upper()  { return string.toupper(this.value); };
		function get()    { return this.value; };
		function set(val) { this.value=tostring(val); };
		value='';
	}
	x=new str("AbC");
	print("["+x.size()+"]\n");  // will print 3
	x.set("aBcDeF");
	print("["+x.size()+"]\n");  // will print 6
	print("["+x.lower()+"]\n"); // will print abcdef
	print("["+x.upper()+"]\n"); // will print ABCDEF
</div>
<p>
Is that technically an example of OO?  True, most OO code has nicer looking
constructors and classes and stuff I don't get, but this is working Nesla code.
</p>
<hr>
<h2>The Basics</h2>
<p>
At the most basic level, objects are tables.  The only thing that makes an
object an object, and not <i>_just_</i> a table, is 'this'.  An object can be created
as simply as doing this:
</p>
<div class='nspcode'>	x = {};
	x.this = &x;
</div>
<p>
'this' is a variable that links to the parent table and exists to provide a
context for methods in the object.  You should never create an object in the
fashion above because it makes code harder to read.  Otherwise, it's a perfectly
valid way to create objects.  If you want to extend this object with properties
and methods, you can do so like this:
</p>
<div class='nspcode'>	x.c = 42;
	x.pc = function () { printf("x.c=%d\r\n", this.c); };
</div>
<p>
And of course, you can call the method in the object like this:
</p>
<div class='nspcode'>	x.pc();
</div>
<p>
Again, while valid, you should never create objects as shown above.
<hr>
<h2>Constructors</h2>
An example of one preferred method would look like this.
</p>
<div class='nspcode'>	function alpha() {
		pc = function () {
			printf("x.c=%d\r\n", this.c);
		};
		c = 42;
	}
	x=new alpha();
	x.pc();
</div>
<p>
The function alpha is what is known as a constructor.  A constructor is a
function that is used to help create an instance of a particular object type.
Notice the keyword 'new'.  This is what tells the interpreter to create and use
an object as the context for the function call, and to return that object as
the function's result.  This method of creating an object is very similar to
how Javascript instantiates objects.  Notably, both have no class.
</p>
<hr>
<h2>Classes</h2>
<p>
The use of classes in building objects is optional, but it can be useful.
</p>
<div class='nspcode'>	class alpha {
		pc = function () {
			printf("x.c=%d\r\n", this.c);
		};
		c = 42;
	}
	x=new alpha();
	x.pc();
</div>
<p>
Do you see the difference?  Me neither.  Actually there is one major difference
here, but it is not obvious.  A class is not a function.  In fact, it is a
table, and this difference is <i>_very_</i> important for one reason; tables
can be linked.  This means that an object (a table) can now be linked to a class
(a table) without having to recreate it.  This can be much faster when creating
new objects, and can use significantly less memory when creating a lot of them.
Now in this case, the function pc and the variable c have a single instance
shared by both objects x and y.
</p>
<div class='nspcode'>	class alpha {
		function alpha(a) {
			this.a = a;
		};
		function pc() {
			printf("x.a=%s, x.c=%d\r\n", this.a, this.c);
		};
		c = 42;
	}
	x=new alpha('x');
	x.pc();
	y=new alpha('y');
	y.pc();
</div>
<p>
Note the addition of the alpha function to the class.  This is a constructor.
Any function with the same name as the class (or the name '_constructor') will
be called when an object is created.  This provides the same level of control
over new objects as that of using a function instead of a class.
</p>
<hr>
<h2>Inheritance</h2>
<p>
Using table linking with classes and objects has one other benefit; inheritance.
In this example, a new object is created using the beta class, and it also
'inherits' the alpha class, including all functions and variables.  It also
'overrides' the value of c without changing the original value in the alpha
class.
</p>
<div class='nspcode'>	class alpha {
		function pc() {
			printf("x.c=%d\r\n", this.c);
		};
		c = 0;
	}
	class beta {
		function beta() {
			this.inherit(alpha);
		};
		c = 42;
	}
	x=new beta();
	x.pc();
</div>
<p>
The inherit function is not limited to use in classes, and can be used on any
tables.
</p>
<br>
</div><div id=c2p0 style='display: block'><h1>2 - The Language</h1>
</div><div id="c2p_core_copy" style="display: block"><!-- CONTENTS_START -->
<A NAME="nsp_copy"></A>
<H2>copy</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Returns a copy of the first parameter.
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c2p_core_eval" style="display: block"><!-- CONTENTS_START -->
<A NAME="nsp_eval"></A>
<H2>eval</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Evaluates a supplied expression.
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c2p_core_exec" style="display: block"><!-- CONTENTS_START -->
<A NAME="nsp_exec"></A>
<H2>exec</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Executes a supplied statement.
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c2p_core_serialize" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_serialize"></a>
<H2>serialize</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Print the provided var in a format appropriate for use in a nesla script. This will recursively print entire tables.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><B>serialize(</B><I>object var</I><B>)<BR></B></BLOCKQUOTE>
<BLOCKQUOTE>
<TABLE CLASS="SYNTAX">
<TR><TD><B>Parameter</B></TD><TD><B>Description</B></TD></TR>
<TR><TD><I>var</I> </TD><TD>Object to be exported.  Can be any object type, including table.</TD></TR>
</TABLE></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns zero.
</BLOCKQUOTE>

<H4>Remarks</H4>
<BLOCKQUOTE>
Any argument that is not a string will be formatted automatically.  Boolean
values will be 'true' or 'false' and numbers will have up to 6 digits past the
decimal.  Most string functions may be binary safe, but this function _will_
terminate its output at the first \0 character.
</BLOCKQUOTE>

<BLOCKQUOTE>
The example "var x={}; x.y=x; <B>serialize</B>(x);" is valid code.
It also recurses infinitely.  Be careful, or you may be cursing infinitely yourself.
</BLOCKQUOTE>

<H4>Examples</H4>
<BLOCKQUOTE>
The following examples demonstrate the difference between print and serialize.
<BR><BR>
<TABLE CLASS="EXAMPLES">
<TR><TD>
<CODE>
<B>var x</B>="this \"is a\" test\n";<BR>
<B>print</B>(x);<BR>
</CODE>
<BR>will display<BR><BR>this "is a" test
</TD></TR></TABLE>
</BLOCKQUOTE>
<BLOCKQUOTE>

<TABLE CLASS="EXAMPLES">
<TR><TD>
<CODE>
<B>var x</B>="this \"is a\" test\n";<BR>
<B>print</B>(<B>serialize</B>(x));<BR>
</CODE>
<BR>will display<BR><BR>"this \"is a\" test\n"
</TD></TR></TABLE>
</BLOCKQUOTE>
<BLOCKQUOTE>

<TABLE CLASS="EXAMPLES">
<TR><TD>
<pre style="display:inline;"><code>var x = {
        [0] = {
                key = "a"
        },
        [1] = {
                key = "b"
        }
};</code></pre><BR>
<CODE>
<B>print</B>(<B>serialize</B>(x));<BR>
</CODE>
<BR>will display<BR><BR>
<pre style="display:inline;">{
        [0] = {
                key = "a"
        },
        [1] = {
                key = "b"
        }
}</pre>
</TD></TR></TABLE>
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c2p_core_include" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_include"></a>
<H2>include</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Include (and interpret) the code in the specified file.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><I>boolean</I> <B>=</B> <B>include(</B><I>filename</I><B>)<BR></B></BLOCKQUOTE>
<BLOCKQUOTE>
<TABLE CLASS="SYNTAX">
<TR><TD><B>Parameter</B></TD><TD><B>Description</B></TD></TR>
<TR><TD><I>filename</I> </TD><TD>String containing the name of the file to be included.</TD></TR>
</TABLE></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns true if the file has been successfully included.  Any false return code indicates an error.
</BLOCKQUOTE>

<H4>Remarks</H4>
<BLOCKQUOTE>
Return codes indicating failure are almost always caused by a nonexistent
or unreadable script file, not errors in the script itself.
</BLOCKQUOTE>

<H4>Example</H4>
<BLOCKQUOTE>
The following example demonstrates how to load a script and verify its success.
<BR><BR>
<TABLE CLASS="EXAMPLES"><TR><TD>
<CODE>
	rval=<B>include</B>("./somefile.ns");<BR>
	<B>if</B> (rval!=true) <B>print</B>("error loading ./somefile.ns\n");
</CODE></TD></TR></TABLE>
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c2p_core_print" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_print"></a>
<H2>print</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Print the complete list of arguments to the standard output.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><I>number</I> <B>=</B> <B>print(</B><I>...</I><B>)<BR></B></BLOCKQUOTE>
<BLOCKQUOTE>
<TABLE CLASS="SYNTAX">
<TR><TD><B>Parameter</B></TD><TD><B>Description</B></TD></TR>
<TR><TD><I>...</I> </TD><TD>List of objects to be printed.</TD></TR>
</TABLE></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns the number of characters printed.
</BLOCKQUOTE>

<H4>Remarks</H4>
<BLOCKQUOTE>
Any argument that is not a string will be formatted automatically.  Boolean
values will be 'true' or 'false' and numbers will have up to 6 digits past the
decimal.  Most string functions may be binary safe, but this function _will_
terminate its output at the first \0 character.
</BLOCKQUOTE>

<H4>Examples</H4>
<BLOCKQUOTE>
The following example demonstrates how to print multiple objects.
<BR><BR>
<TABLE CLASS="EXAMPLES">
<TR><TD>
<CODE>
	<B>print</B>("Hello", "world.\n");<BR>
</CODE></TD></TR></TABLE>
</BLOCKQUOTE>
<BLOCKQUOTE>
The following example gives the same output as above, but note that using + to
concatenate the strings means that print only receives one argument.
<BR><BR>
<TABLE CLASS="EXAMPLES">
<TR><TD>
<CODE>
	<B>print</B>("Hello"+"world.\n");<BR>
</CODE></TD></TR></TABLE>
</BLOCKQUOTE>

<H4>See Also</H4>
<BLOCKQUOTE>
<B><A HREF="#c4p_io_print"          onClick="showpage('4', '_io_print');         return false;">io.print()</A></B>
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c2p_core_runtime" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_runtime"></a>
<H2>runtime</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Returns the elapsed time the parser has been running.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><I>number</I> <B>=</B> <B>runtime(</B><B>)<BR></B></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns the time in seconds (with microsecond precision) the parser has been running.
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c2p_core_sizeof" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_sizeof"></a>
<H2>sizeof</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Returns the size of the object.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><I>number</I> <B>=</B> <B>sizeof(</B><I>object</I><B>)<BR></B></BLOCKQUOTE>
<BLOCKQUOTE>
<TABLE CLASS="SYNTAX">
<TR><TD><B>Parameter</B></TD><TD><B>Description</B></TD></TR>
<TR><TD><I>object</I> </TD><TD>Object to be sized.  The return value's meaning will vary depending on this object's type.</TD></TR>
</TABLE></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns the size of the object.  For strings, this is the string length;
for tables, the number of non-null objects in the table.  Null values
are zero size.
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c2p_core_sleep" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_sleep"></a>
<H2>sleep</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Sleep for a specified number of seconds.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><B>sleep(</B><I>number seconds</I><B>)<BR></B></BLOCKQUOTE>
<BLOCKQUOTE>
<TABLE CLASS="SYNTAX">
<TR><TD><B>Parameter</B></TD><TD><B>Description</B></TD></TR>
<TR><TD><I>seconds</I> </TD><TD>Number of seconds the script should pause execution.</TD></TR>
</TABLE></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns zero.
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c2p_core_system" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_system"></a>
<H2>system</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Performs an operating system call and returns the resulting errorcode.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE>
<CODE>
<I>number</I> <B>=</B> <B>system(</B><I>string command</I><B>)<BR></B>
</CODE>
<BR>
<TABLE CLASS="SYNTAX">
<TR><TH><B>Parameter</B></TH><TH><B>Description</B></TH></TR>
<TR><TD><I>command</I> </TD><TD>Operating system command to be executed.</TD></TR>
</TABLE>
</BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns the errorcode after execution of <I>command</I>.
</BLOCKQUOTE>

<H4>Remarks</H4>
<BLOCKQUOTE>
This function does not include or easily allow any sophisticated methods
such as piping, signal handling, or interactivity.
</BLOCKQUOTE>

<H4>Examples</H4>
<BLOCKQUOTE>
The following example demonstrates a way to list a directory and then read the results.
<BR><BR>
<TABLE CLASS="EXAMPLES">
<TR><TD>
<CODE>
<B>system</B>("ls"+" -l"+" > x.txt");<BR>
<B>print</B>(<B>file.readall</B>("x.txt"));<BR>
<B>file.unlink</B>("x.txt");<BR>
</CODE>
</TD></TR></TABLE>
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c2p_core_tonumber" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_tonumber"></a>
<H2>tonumber</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Returns a number value equivalent of the source.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><I>number</I> <B>=</B> <B>tonumber(</B><I>object</I><B>)<BR></B></BLOCKQUOTE>
<BLOCKQUOTE>
<TABLE CLASS="SYNTAX">
<TR><TD><B>Parameter</B></TD><TD><B>Description</B></TD></TR>
<TR><TD><I>object</I> </TD><TD>Object to be converted to a numeric value.</TD></TR>
</TABLE></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns a numeric approximation of the object parameter.  Objects such as tables
and null will return zero since no other numeric value can be meaningfully representative.
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c2p_core_tostring" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_tostring"></a>
<H2>tostring</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Returns a string value equivalent of the source.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><I>string</I> <B>=</B> <B>tostring(</B><I>object[, number]</I><B>)<BR></B></BLOCKQUOTE>
<BLOCKQUOTE>
<TABLE CLASS="SYNTAX">
<TR><TD><B>Parameter</B></TD><TD><B>Description</B></TD></TR>
<TR><TD><I>object</I> </TD><TD>Object to be converted to a numeric value.</TD></TR>
<TR><TD><I>number</I> </TD><TD>Precision to use for a numeric <I>object</I>.</TD></TR>
</TABLE></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns a string value equivalent of the source.  If both arguments are
numbers, the second allows the setting of a decimal precision.
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c2p_core_typeof" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_typeof"></a>
<H2>typeof</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Returns the name of the type of object.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><I>string</I> <B>=</B> <B>typeof(</B><I>object</I><B>)<BR></B></BLOCKQUOTE>
<BLOCKQUOTE>
<TABLE CLASS="SYNTAX">
<TR><TD><B>Parameter</B></TD><TD><B>Description</B></TD></TR>
<TR><TD><I>object</I> </TD><TD>Object to be identified by type.</TD></TR>
</TABLE></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns the name of the object type.  Possible types include boolean, number, string, table, function and null.
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c2p_core_write" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_write"></a>
<H2>write</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Writes the entire object as a string and returns the result code.
This function is binary safe.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><I>number</I> <B>=</B> <B>write(</B><I>object</I><B>)<BR></B></BLOCKQUOTE>
<BLOCKQUOTE>
<TABLE CLASS="SYNTAX">
<TR><TD><B>Parameter</B></TD><TD><B>Description</B></TD></TR>
<TR><TD><I>object</I> </TD><TD>Object to be written to standard output.</TD></TR>
</TABLE></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns the number of bytes written.
</BLOCKQUOTE>

<H4>See Also</H4>
<BLOCKQUOTE>
<B><A HREF="#c4p_io_write"          onClick="showpage('4', '_io_write');         return false;">io.write()</A></B>
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id=c3p0 style='display: block'><h1>3 - file.*()</h1>
</div><div id="c3p_lib_file_append" style="display: block"><hr><h3><a name="nsp_file_append"><code>(string) lib.file.append(string filename[, object]);</code></a></h3>
Writes the entire object to the end of an existing file as a string and returns the result code.
This function is binary safe.
</div><div id="c3p_lib_file_mkdir" style="display: block"><hr><h3><a name="nsp_file_mkdir"><code>(string) lib.file.mkdir(string dirname[, number mode]);</code></a></h3>
</div><div id="c3p_lib_file_readall" style="display: block"><hr><h3><a name="nsp_file_read"><code>(string) lib.file.read(string filename);</code></a></h3>
Reads the entire file into a string and returns that string.
This function is binary safe, but use of some string functions to manipulate this string may mangle the data.
</div><div id="c3p_lib_file_rename" style="display: block"><hr><h3><a name="nsp_file_rename"><code>(string) lib.file.rename(string filename, string newfilename);</code></a></h3>
Renames a file.
</div><div id="c3p_lib_file_stat" style="display: block"><hr><h3><a name="nsp_file_stat"><code>(table) lib.file.stat(string filename);</code></a></h3>
Stats filename and returns a table with stats.
</div><div id="c3p_lib_file_unlink" style="display: block"><hr><h3><a name="nsp_file_unlink"><code>(number) lib.file.unlink(string filename);</code></a></h3>
Unlink filename and return zero if successful.
</div><div id="c3p_lib_file_writeall" style="display: block"><hr><h3><a name="nsp_file_write"><code>(number) lib.file.write(string filename[, object]);</code></a></h3>
Writes the entire object as a string and returns the result code.
This function is binary safe.
</div><div id=c4p0 style='display: block'><h1>4 - io.*()</h1>
</div><div id="c4p_lib_io_gets" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_io_gets"></a>
<H2>lib.io.gets</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Get a string from the console.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><I>string</I> <B>=</B> <B>lib.io.gets(</B><B>)<BR></B></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns the string entered.
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c4p_lib_io_flush" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_io_flush"></a>
<H2>lib.io.flush</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Flushes the output buffer.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><I>number</I> <B>=</B> <B>io.flush(</B><B>)<BR></B></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns zero.
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c4p_lib_io_print" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_io_print"></a>
<H2>lib.io.print</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Print the complete list of arguments to the standard output.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><I>number</I> <B>=</B> <B>io.print(</B><I>...</I><B>)<BR></B></BLOCKQUOTE>
<BLOCKQUOTE>
<TABLE CLASS="SYNTAX">
<TR><TD><B>Parameter</B></TD><TD><B>Description</B></TD></TR>
<TR><TD><I>...</I> </TD><TD>List of objects to be printed.</TD></TR>
</TABLE></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns the number of characters printed.
</BLOCKQUOTE>

<H4>Remarks</H4>
<BLOCKQUOTE>
Any argument that is not a string will be formatted automatically.  Boolean
values will be 'true' or 'false' and numbers will have up to 6 digits past the
decimal.  Most string functions may be binary safe, but this function _will_
terminate its output at the first \0 character.
</BLOCKQUOTE>

<H4>Examples</H4>
<BLOCKQUOTE>
The following example demonstrates how to print multiple objects.
<BR><BR>
<TABLE CLASS="EXAMPLES"><TR><TD>
<CODE>
	<B>io.print</B>("Hello", "world.\n");<BR>
</CODE></TD></TR></TABLE>
</BLOCKQUOTE>
<BLOCKQUOTE>
The following example gives the same output as above, but note that using + to
concatenate the strings means that print only receives one argument.
<BR><BR>
<TABLE CLASS="EXAMPLES"><TR><TD>
<CODE>
	<B>io.print</B>("Hello"+"world.\n");<BR>
</CODE></TD></TR></TABLE>
</BLOCKQUOTE>

<H4>See Also</H4>
<BLOCKQUOTE>
<B><A HREF="#c2p_core_print"          onClick="showpage('2', '_core_print');         return false;">print()</A></B>
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c4p_lib_io_write" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_io_write"></a>
<H2>lib.io.write</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Writes the entire object as a string and returns the result code.
This function is binary safe.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><I>number</I> <B>=</B> <B>io.write(</B><I>object</I><B>)<BR></B></BLOCKQUOTE>
<BLOCKQUOTE>
<TABLE CLASS="SYNTAX">
<TR><TD><B>Parameter</B></TD><TD><B>Description</B></TD></TR>
<TR><TD><I>object</I> </TD><TD>Object to be written to standard output.</TD></TR>
</TABLE></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns the number of bytes written.
</BLOCKQUOTE>

<H4>See Also</H4>
<BLOCKQUOTE>
<B><A HREF="#c2p_core_write" onClick="showpage('2', '_core_write'); return false;">write()</A></B>
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id=c5p0 style='display: block'><h1>5 - math.*()</h1>
</div><div id="c5p_lib_math_abs" style="display: block"><hr><h3><a name="nsp_math_abs"><code>(number) lib.math.abs(number n);</code></a></h3>
</div><div id="c5p_lib_math_acos" style="display: block"><hr><h3><a name="nsp_math_acos"><code>(number) lib.math.acos(number n);</code></a></h3>
</div><div id="c5p_lib_math_asin" style="display: block"><hr><h3><a name="nsp_math_asin"><code>(number) lib.math.asin(number n);</code></a></h3>
</div><div id="c5p_lib_math_atan" style="display: block"><hr><h3><a name="nsp_math_atan"><code>(number) lib.math.atan(number n);</code></a></h3>
</div><div id="c5p_lib_math_atan2" style="display: block"><hr><h3><a name="nsp_math_atan2"><code>(number) lib.math.atan2(number n);</code></a></h3>
</div><div id="c5p_lib_math_ceil" style="display: block"><hr><h3><a name="nsp_math_ceil"><code>(number) lib.math.ceil(number n);</code></a></h3>
</div><div id="c5p_lib_math_cos" style="display: block"><hr><h3><a name="nsp_math_cos"><code>(number) lib.math.cos(number n);</code></a></h3>
</div><div id="c5p_lib_math_cosh" style="display: block"><hr><h3><a name="nsp_math_cosh"><code>(number) lib.math.cosh(number n);</code></a></h3>
</div><div id="c5p_lib_math_exp" style="display: block"><hr><h3><a name="nsp_math_exp"><code>(number) lib.math.exp(number n);</code></a></h3>
</div><div id="c5p_lib_math_floor" style="display: block"><hr><h3><a name="nsp_math_floor"><code>(number) lib.math.floor(number n);</code></a></h3>
</div><div id="c5p_lib_math_log" style="display: block"><hr><h3><a name="nsp_math_log"><code>(number) lib.math.log(number n);</code></a></h3>
</div><div id="c5p_lib_math_log10" style="display: block"><hr><h3><a name="nsp_math_log10"><code>(number) lib.math.log10(number n);</code></a></h3>
</div><div id="c5p_lib_math_rand" style="display: block"><hr><h3><a name="nsp_math_rand"><code>(number) lib.math.rand([number range]);</code></a></h3>
</div><div id="c5p_lib_math_sin" style="display: block"><hr><h3><a name="nsp_math_sin"><code>(number) lib.math.sin(number n);</code></a></h3>
</div><div id="c5p_lib_math_sinh" style="display: block"><hr><h3><a name="nsp_math_sinh"><code>(number) lib.math.sinh(number n);</code></a></h3>
</div><div id="c5p_lib_math_sqrt" style="display: block"><hr><h3><a name="nsp_math_sqrt"><code>(number) lib.math.sqrt(number n);</code></a></h3>
</div><div id="c5p_lib_math_tan" style="display: block"><hr><h3><a name="nsp_math_tan"><code>(number) lib.math.tan(number n);</code></a></h3>
</div><div id="c5p_lib_math_tanh" style="display: block"><hr><h3><a name="nsp_math_tanh"><code>(number) lib.math.tanh(number n);</code></a></h3>
</div><div id=c6p0 style='display: block'><h1>6 - string.*()</h1>

<p>
	A series of functions exist in the string namespace for working with
	strings.  Most of these functions can also be accessed as methods of
	the base type itself.  For example, 's.sub(0, 2)' is the equivalent of
	'string.sub(s, 0, 2)' (assuming 's' is a string).  A list of these
	methods is shown here.
</p>

<h1>Methods</h1>
<table class="methods" border=1>
	<tr>
		<th>Method Name</th>
		<th>Description</th>
	</tr>
	<tr>
		<td><a class="link">gettype()</a></td>
		<td>Returns a string describing the base type of a string, which is always "string".</td>
	</tr>
	<tr>
		<td><a class="link" href="#c6p_string_istr" onclick="showpage('6', '_string_istr'); return false;">istr(string x)</a></td>
		<td>Returns a substring starting at the point of the first case-insensitive match of x in the string, or null if no match is found.</td>
	</tr>
	<tr>
		<td>
			<a class="link" href="#c6p_string_len" onclick="showpage('6', '_string_len'); return false;">length()</a><br />
			aka <a class="link" href="#c6p_string_len" onclick="showpage('6', '_string_len'); return false;">len()</a>
		</td>
		<td>Returns the length of the string.</td>
	</tr>
	<tr>
		<td><a class="link" href="#c6p_string_replace" onclick="showpage('6', '_string_replace'); return false;">replace(string x)</a></td>
		<td>Returns a new string with occurences of x in this string replaced.</td>
	</tr>
	<tr>
		<td style="white-space:nowrap"><a class="link" href="#c6p_string_split" onclick="showpage('6', '_string_split'); return false;">split(string x, string y)</a></td>
		<td>Returns a table containing substrings of x, separated by y.</td>
	</tr>
	<tr>
		<td><a class="link" href="#c6p_string_str" onclick="showpage('6', '_string_str'); return false;">str(string x)</a></td>
		<td>Returns a substring starting at the point of the first match of x in the string, or null if no match is found.</td>
	</tr>
	<tr>
		<td style="white-space:nowrap">
			<a class="link" href="#c6p_string_sub" onclick="showpage('6', '_string_sub'); return false;">substring(number x, [number y])</a><br />
			aka <a class="link" href="#c6p_string_sub" onclick="showpage('6', '_string_sub'); return false;">sub(number x, [number y])</a>
		</td>
		<td>Return a substring starting at index <i>x</i>, and continuing for <i>y</i> characters.  If <i>x</i> is negative, the substring starting point is the end of the string minux <i>x</i>.</td>
	</tr>
	<tr>
		<td><a class="link" href="#c6p_string_tolower" onclick="showpage('6', '_string_tolower'); return false;">tolower()</a></td>
		<td>Returns a lower-case copy of the string.</td>
	</tr>
	<tr>
		<td>
			<a class="link">tostring()</a><br />
			aka <a class="link">tostr()</a>
		</td>
		<td>Returns a string representation of the object.  If the object is already a string, an unmodified copy of the original is returned.</td>
	</tr>
	<tr>
		<td><a class="link" href="#c6p_string_toupper" onclick="showpage('6', '_string_toupper'); return false;">toupper()</a></td>
		<td>Returns an upper-case copy of the string.</td>
	</tr>
	<tr>
		<td></td>
		<td></td>
	</tr>
</table>
<code>
pages = {
	{ name="string.atoi",    tag="atoi"    };
	{ name="string.cat",     tag="cat"     };
	{ name="string.cmp",     tag="cmp"     };
	{ name="string.icmp",    tag="icmp"    };
//	{ name="string.istr",    tag="istr"    };
	{ name="string.itoa",    tag="itoa"    };
	{ name="string.join",    tag="join"    };
//	{ name="string.len",     tag="len"     };
	{ name="string.ncmp",    tag="ncmp"    };
	{ name="string.nicmp",   tag="nicmp"   };
//	{ name="string.replace", tag="replace" };
//	{ name="string.split",   tag="split"   };
//	{ name="string.str",     tag="str"     };
//	{ name="string.sub",     tag="sub"     };
//	{ name="string.tolower", tag="tolower" };
//	{ name="string.toupper", tag="toupper" };
};
</code>
</div><div id="c6p_lib_string_atoi" style="display: block"><hr><h3><a name="nsp_string_atoi"><code>(number) lib.string.atoi(string str1);</code></a></h3></div><div id="c6p_lib_string_cat" style="display: block"><hr><h3><a name="nsp_string_cat"><code>(string) string.cat(string str1, string str2);</code></a></h3>
<br>
	string.cat(x, y) will not change x or y.  to set x to the result, use "x=string.cat(x, y)"<br>
	actually, all string functions should work like this (by not modifying the original arguments.<br>
<br>
</div><div id="c6p_lib_string_cmp" style="display: block"><hr><h3><a name="nsp_string_cmp"><code>(number) string.cmp(string str1, string str2);</code></a></h3>
Case sensitive string comparison.
</div><div id="c6p_lib_string_icmp" style="display: block"><hr><h3><a name="nsp_string_icmp"><code>(number) string.icmp(string str1, string str2);</code></a></h3>
Case insensitive string comparison.
</div><div id="c6p_lib_string_istr" style="display: block"><hr><h3><a name="nsp_string_istr"><code>(string) string.istr(string stack, string needle);</code></a></h3>
Case insensitive substring search.
</div><div id="c6p_lib_string_itoa" style="display: block"><hr><h3><a name="nsp_string_itoa"><code>(string) lib.string.itoa(number num1);</code></a></h3></div><div id="c6p_lib_string_join" style="display: block"><hr><h3><a name="nsp_string_join"><code>(table) string.join(table str, string sep);</code></a></h3>
This will merge the table str into a single string separated by sep.
</div><div id="c6p_lib_string_len" style="display: block"><hr><h3><a name="nsp_string_len"><code>(number) string.len(string str);</code></a></h3>
Length of the string (binary safe).
</div><div id="c6p_lib_string_ncmp" style="display: block"><hr><h3><a name="nsp_string_ncmp"><code>(number) string.ncmp(string str1, string str2, number len);</code></a></h3>
Case sensitive substring comparison up to <I>len</I> characters.
</div><div id="c6p_lib_string_nicmp" style="display: block"><hr><h3><a name="nsp_string_nicmp"><code>(number) string.nicmp(string str1, string str2, number len);</code></a></h3>
Case insensitive substring comparison up to <I>len</I> characters.
</div><div id="c6p_lib_string_replace" style="display: block">string.replace(string x, string y);
</div><div id="c6p_lib_string_split" style="display: block"><hr><h3><a name="nsp_string_split"><code>(table) string.split(string str, string sep);</code></a></h3>
This will separate the string into substrings and put those substrings in the returned table.
</div><div id="c6p_lib_string_str" style="display: block"><hr><h3><a name="nsp_string_str"><code>(string) string.str(string stack, string needle);</code></a></h3>
Case sensitive substring search.
</div><div id="c6p_lib_string_sub" style="display: block"><hr><h3><a name="nsp_string_sub"><code>(string) string.sub(string stack, number offset[, number maxlen]);</code></a></h3>
Returns a substring ranging from <I>offset</I> to <I>maxlen</I>.
</div><div id="c6p_lib_string_tolower" style="display: block"><!-- CONTENTS_START -->
<A NAME="nsp_string_tolower"></A>
<H2>string.tolower</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Returns a lower case version of the supplied string.
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c6p_lib_string_toupper" style="display: block"><!-- CONTENTS_START -->
<A NAME="nsp_string_toupper"></A>
<H2>string.toupper</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Returns an upper case version of the supplied string.
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id=c7p0 style='display: block'><h1>7 - lib.table.*()</h1>

</div><div id="c7p_lib_table_iname" style="display: block"><!-- CONTENTS_START -->
<A NAME="nsp_iname"></A>
<H2>lib.table.iname</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Returns the name of a table entry at a given index.
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c7p_lib_table_ival" style="display: block"><!-- CONTENTS_START -->
<A NAME="nsp_ival"></A>
<H2>lib.table.ival</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Returns a pointer to the value of a table entry at a given index.
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c7p_lib_table_sortbykey" style="display: block"><hr><h3><a name="nsp_sort_bykey"><code>(number) lib.table.sortbykey(table t, string subkey);</code></a></h3>
</div><div id="c7p_lib_table_sortbyname" style="display: block"><hr><h3><a name="nsp_sort_byname"><code>(number) lib.table.sortbyname(table t[, number recursive]);</code></a></h3>
</div><div id="c7p_lib_table_zlink" style="display: block"><!-- CONTENTS_START -->
<A NAME="nsp_zlink"></A>
<H2>lib.table.zlink</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Causes table a to inherit table b.
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id=c8p0 style='display: block'><h1>8 - lib.time.*()</h1>

<p>
All time functions assume the use of UTC times as input, and with the sole
exception of time.localtime(), all functions return time in UTC if no input
is given, and do not convert time between zones.  When getting a time structure,
if you do not want to convert between timezones, will likely want to use the gmtime
function, even when are working with local times, to avoid repeated conversions.
For example, <code>
	time.gmtime(time.mktime(time.gmtime()))
</code> will return the same value in the first call to gmtime as the second.  In
the case of <code>
	time.localtime(time.mktime(time.localtime()))
</code>, the time zone difference is added multiple times, which is very likely not
the desired effect.  To convert the time zone only once, this would be safe:
<code>
	time.gmtime(time.mktime(time.localtime()))
</code>
</p>

<code>
time.now()			/* returns a number (seconds since January 1, 1970 UTC) */
time.gettimeofday()		/* returns a table with the current time in seconds and microseconds */
				/* <code>{ tv_sec = 1534689210, tv_usec = 747662 }</code> */

time.gmtime([number|string])	/* returns a table describing the current date and time (UTC), */
				/* or describing the number provided without converting the time zone. */
time.localtime([number|string])	/* returns a table describing the current date and time , or describing */
				/* the number provided, in both cases converting the time to your */
				/* system's configured local time. */

time.mktime(table|string)	/* returns a number representing the seconds since January 1, 1970 UTC as described in the parameter */
				/* obsoletes time.tmtounix(table) and time.sqltounix(string) */

time.sqltime([table|number])	/* returns a string in SQL format of the time provided by the numeric or tm table parameter */
time.asctime([table|number])	/* identical to sqltime but may in the future return dates in other string formats */

//sample tm-based (calendar time) table - Sat Aug 18 21:29:03 EDT 2018
time.localtime() returns  {
	tm_sec = 3,     /* The number of seconds after the minute, from 0-59.                  */
	tm_min = 29,    /* The number of minutes after the hour, from 0-59.                    */
	tm_hour = 21,   /* The number of hours past midnight, from 0-23.                       */
	tm_mday = 18,   /* The day of the month, from 1-31.                                    */
	tm_mon = 8,     /* The month of the year, from 1-12.                                   */
	tm_year = 2018, /* The year.                                                           */
	tm_wday = 6,    /* The number of days after Sunday, from 0-6.                          */
	tm_yday = 229,  /* The number of days since January 1, from 0-365.                     */
	tm_isdst = 1    /* A flag indicating daylight savings time is in effect for this date. */
}
</code>
</div><div id="c8p_lib_time_asctime" style="display: block"><!-- CONTENTS_START -->
<A NAME="nsp_asctime"></A>
<H2>lib.time.asctime</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Returns a string representation of <VAR>timestamp</VAR> in the format 'YYYY-MM-DD HH:MM:SS'.
If <VAR>timestamp</VAR> is not defined, the function will use the current time.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><I>string</I> <B>=</B> <B>time.asctime(</B><I>[number timestamp]</I><B>)<BR></B></BLOCKQUOTE>
<BLOCKQUOTE>
<TABLE CLASS="SYNTAX">
<TR><TD><B>Parameter</B></TD><TD><B>Description</B></TD></TR>
<TR><TD><I>timestamp</I> </TD><TD>The <B>number</B> of seconds since January 1, 1970 UTC (commonly called a UNIX timestamp).</TD></TR>
</TABLE></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns a formatted date <VAR>string</VAR> in the format 'YYYY-MM-DD HH:MM:SS'.
</BLOCKQUOTE>

<H4>Remarks</H4>
<BLOCKQUOTE>
No remarks.
</BLOCKQUOTE>

<H4>Examples</H4>
<BLOCKQUOTE>
<TABLE CLASS="EXAMPLES"><TR><TD>
<CODE>
	<B>print</B>(<B>time.asctime</B>());
</CODE></TD></TR></TABLE>
<BR>
The above example will output something similar to: "<B>2015-01-01 16:30:45</B>"
</BLOCKQUOTE>

<H4>See Also</H4>
<BLOCKQUOTE>
<B><A HREF="#c7p_time_sqltime"          onClick="showpage('7', '_time_sqltime');         return false;">time.sqltime()</A></B>
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c8p_lib_time_gettimeofday" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_gettimeofday"></a>
<H2>lib.time.gettimeofday</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Returns a table with the elapsed time in seconds and microseconds since January 1, 1970.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><I>table</I> <B>=</B> <B>time.gettimeofday(</B><B>)<BR></B></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns a table with the time in seconds and microseconds since the creation of the UNIXverse.
<code>
{
	tv_sec = 1534689210,
	tv_usec = 747662
}
</code>
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c8p_lib_time_gmtime" style="display: block"><!-- CONTENTS_START -->
<A NAME="nsp_gmtime"></A>
<H2>lib.time.gmtime</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Returns a table representation of <VAR>timestamp</VAR>. If <VAR>timestamp</VAR>
is not defined, the function will use the current local system date.

<code>
{
	tm_sec = 3,     /* The number of seconds after the minute, from 0-59.                  */
	tm_min = 29,    /* The number of minutes after the hour, from 0-59.                    */
	tm_hour = 21,   /* The number of hours past midnight, from 0-23.                       */
	tm_mday = 18,   /* The day of the month, from 1-31.                                    */
	tm_mon = 8,     /* The month of the year, from 1-12.                                   */
	tm_year = 2018, /* The year.                                                           */
	tm_wday = 6,    /* The number of days after Sunday, from 0-6.                          */
	tm_yday = 229,  /* The number of days since January 1, from 0-365.                     */
	tm_isdst = 0    /* A flag indicating daylight savings time is in effect for this date. */
}
</code>

</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c8p_lib_time_localtime" style="display: block"><!-- CONTENTS_START -->
<A NAME="nsp_localtime"></A>
<H2>lib.time.localtime</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Returns a table representation of <VAR>timestamp</VAR>. If <VAR>timestamp</VAR>
is not defined, the function will use the current local system date.

<code>
{
	tm_sec = 3,     /* The number of seconds after the minute, from 0-59.                  */
	tm_min = 29,    /* The number of minutes after the hour, from 0-59.                    */
	tm_hour = 21,   /* The number of hours past midnight, from 0-23.                       */
	tm_mday = 18,   /* The day of the month, from 1-31.                                    */
	tm_mon = 8,     /* The month of the year, from 1-12.                                   */
	tm_year = 2018, /* The year.                                                           */
	tm_wday = 6,    /* The number of days after Sunday, from 0-6.                          */
	tm_yday = 229,  /* The number of days since January 1, from 0-365.                     */
	tm_isdst = 1    /* A flag indicating daylight savings time is in effect for this date. */
}
</code>
		
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c8p_lib_time_mktime" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_mktime"></a>
<H2>lib.time.mktime</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Returns the time in seconds (represented by the parameter) since January 1, 1970.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><I>number</I> <B>=</B> <B>time.mktime(</B>table|string<B>)<BR></B></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns the time in seconds represented by the table or sql-formatted string provided as a parameter.
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c8p_lib_time_now" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_time"></a>
<H2>lib.time.now</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Returns the elapsed time in seconds since January 1, 1970 UTC.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><I>number</I> <B>=</B> <B>time.now(</B><B>)<BR></B></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns the time in seconds since the creation of the UNIXverse.
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c8p_lib_time_sqltime" style="display: block"><!-- CONTENTS_START -->
<A NAME="nsp_sqltime"></A>
<H2>lib.time.sqltime</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Returns a string representation of <VAR>timestamp</VAR> in the format 'YYYY-MM-DD HH:MM:SS'.
If <VAR>timestamp</VAR> is not defined, the function will use the current time.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><I>string</I> <B>=</B> <B>time.sqltime(</B><I>[number timestamp]</I><B>)<BR></B></BLOCKQUOTE>
<BLOCKQUOTE>
<TABLE CLASS="SYNTAX">
<TR><TD><B>Parameter</B></TD><TD><B>Description</B></TD></TR>
<TR><TD><I>timestamp</I> </TD><TD>The <B>number</B> of seconds since January 1, 1970 UTC (commonly called a UNIX timestamp).</TD></TR>
</TABLE></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns a formatted date <VAR>string</VAR> in the format 'YYYY-MM-DD HH:MM:SS'.
</BLOCKQUOTE>

<H4>Remarks</H4>
<BLOCKQUOTE>
sqltime is functionally identical to asctime, but future versions of asctime might return dates in different string formats.
</BLOCKQUOTE>

<H4>Examples</H4>
<BLOCKQUOTE>
<TABLE CLASS="EXAMPLES"><TR><TD>
<CODE>
	<B>print</B>(<B>time.sqltime</B>());
</CODE></TD></TR></TABLE>
<BR>
The above example will output something similar to: "<B>2015-01-01 16:30:45</B>"
</BLOCKQUOTE>

<H4>See Also</H4>
<BLOCKQUOTE>
<B><A HREF="#c7p_time_asctime"          onClick="showpage('7', '_time_asctime');         return false;">time.asctime()</A></B>
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id=c9p0 style='display: block'><h1>9 - lib.data.*()</h1>
</div><div id="c9p_lib_data_cdb_read" style="display: block">This page is not here.</div><div id="c9p_lib_data_cdb_write" style="display: block">This page is not here.</div><div id="c9p_lib_data_dbf_reader" style="display: block">This page is not here.</div><div id="c9p_lib_data_firebird_client" style="display: block">This page is not here.</div><div id="c9p_lib_data_firebird_escape" style="display: block">This page is not here.</div><div id="c9p_lib_data_mysql_query" style="display: block">This page is not here.</div><div id="c9p_lib_data_odbc_client" style="display: block">This page is not here.</div><div id="c9p_lib_data_pgsql_query" style="display: block">This page is not here.</div><div id="c9p_lib_data_sqlite3_client" style="display: block">This page is not here.</div><div id="c9p_lib_data_sqlite3_escape" style="display: block">This page is not here.</div><div id="c9p_lib_data_xml_read" style="display: block"><hr><h3><a name="nsp_xml_read"><code>(table) lib.data.xml.read(string str);</code></a></h3>
<p>
Read the supplied XML text and return a digested table.
This is _not_ a pretty function.
</p>
</div><div id=c10p0 style='display: block'><h1>10 - The Extension Libraries</h1>

<h2>neslaext functions</h2>
</div><div id="c10p_libext_base64_decode" style="display: block"><hr><h3><a name="nsp_base64_decode"><code>(string) base64.decode(string encoded);</code></a></h3>
Return a decoded value from a base64-encoded string.
</div><div id="c10p_libext_base64_encode" style="display: block"><hr><h3><a name="nsp_base64_encode"><code>(string) base64.encode(string decoded);</code></a></h3>
Return an encoded value from a raw string.
</div><div id="c10p_libext_dirlist" style="display: block"><hr><h3><a name="nsp_dirlist"><code>(table) dirlist(string dirname);</code></a></h3>
Returns a table containing files and attributes in the supplied dirname.
</div><div id="c10p_libext_rot13" style="display: block"><hr><h3><a name="nsp_rot13"><code>(string) rot13(string str);</code></a></h3>
Returns a rot13 *cough* encoded string from str.
<BR>
Double-rot13 encryption is so stealthy, you won't even know it's been encrypted.
</div><div id=c11p0 style='display: block'><h1>11 - lib.net.*()</h1>
</div><div id="c11p_lib_net_dns_name2addr" style="display: block">This page is not here.</div><div id="c11p_lib_net_dns_addr2name" style="display: block">This page is not here.</div><div id="c11p_lib_net_ftp_client" style="display: block">This page is not here.</div><div id="c11p_lib_net_http_client" style="display: block"><hr><h3><a name="nsp_http_get"><code>(table) http.get(number ssl, string host, number port, string uri);</code></a></h3>
<p>
Connect to an HTTP server and retrieve the requested uri. Returns a table with { head, body } elements.
</p>
<code>
lib.load("net")
hconn = new lib.net.http.client("http://nulllogic.ca/");
if (typeof(x=hconn.send())=='table') {
	print("\t", x.status, "\n");
}
</code>
<hr>
</div><div id="c11p_lib_net_ldap_search" style="display: block">This page is not here.</div><div id="c11p_lib_net_mime_read" style="display: block">This page is not here.</div><div id="c11p_lib_net_mime_write" style="display: block">This page is not here.</div><div id="c11p_lib_net_mime_decode_qp" style="display: block">This page is not here.</div><div id="c11p_lib_net_mime_decode_rfc2047" style="display: block">This page is not here.</div><div id="c11p_lib_net_pop3_client" style="display: block">This page is not here.</div><div id="c11p_lib_net_smtp_client" style="display: block">This page is not here.</div><div id="c11p_lib_net_ssh_auth" style="display: block"></div><div id="c11p_lib_net_ssh_close" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_ssh_close"></a>
<H2>ssh.open</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Cloae an SSH connection.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><I>number</I> <B>=</B> <B>ssh.close(</B><I>conn</I><B>)<BR></B></BLOCKQUOTE>
<BLOCKQUOTE>
<TABLE CLASS="SYNTAX">
<TR><TD><B>Parameter</B></TD><TD><B>Description</B></TD></TR>
<TR><TD><I>conn</I> </TD><TD>Server connection object to be closed.</TD></TR>
</TABLE></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Always returns zero.
</BLOCKQUOTE>

<H4>Remarks</H4>
<BLOCKQUOTE>
None
</BLOCKQUOTE>

<H4>Example</H4>
<BLOCKQUOTE>
The following example demonstrates how to close a host connection.
<BR><BR>
<TABLE CLASS="EXAMPLES"><TR><TD>
<CODE>
	<B>ssh.close</B>(conn);
</CODE></TD></TR></TABLE>
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c11p_lib_net_ssh_cmd" style="display: block"></div><div id="c11p_lib_net_ssh_hostkey" style="display: block"></div><div id="c11p_lib_net_ssh_open" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_ssh_open"></a>
<H2>ssh.open</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Open an SSH connection to a given host/port.
</BLOCKQUOTE>

<H4>Syntax</H4>
<BLOCKQUOTE><I>ssh-conn</I> <B>=</B> <B>ssh.open(</B><I>hostname</I>[, <I>port</I>]<B>)<BR></B></BLOCKQUOTE>
<BLOCKQUOTE>
<TABLE CLASS="SYNTAX">
<TR><TD><B>Parameter</B></TD><TD><B>Description</B></TD></TR>
<TR><TD><I>hostname</I> </TD><TD>String containing the name of the server to connect to.</TD></TR>
<TR><TD><I>port</I> </TD><TD>Number containing the server port to connect to (default is 22).</TD></TR>
</TABLE></BLOCKQUOTE>

<H4>Return Value</H4>
<BLOCKQUOTE>
Returns an ssh-conn connection object if successful.  Any number returned likely indicates an error.
</BLOCKQUOTE>

<H4>Remarks</H4>
<BLOCKQUOTE>
None
</BLOCKQUOTE>

<H4>Example</H4>
<BLOCKQUOTE>
The following example demonstrates how to connect to a host and verify success.
<BR><BR>
<TABLE CLASS="EXAMPLES"><TR><TD>
<CODE>
<B>if</B> (<B>typeof</B>(conn=<B>ssh.open</B>("192.168.0.1", 22))!='ssh-conn') {<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>print</B>("failed connection");<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>exit</B>;<BR>
}<BR>
<FONT COLOR='green'>/* checking the host's RSA key fingerprint is optional, but a good idea. */</FONT><BR>
key="ff:ff:ff:ff:ff:ff:ff:ff:ff:ff:ff:ff:ff:ff:ff:ff";<BR>
<B>if</B> ((k=ssh.hostkey(conn))!=key) {<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>print</B>("expected = "+key+"\nrecieved = "+k+"\n");<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>print</B>("Host key verification failed.\n");<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>exit</B>;<BR>
}<BR>
<B>print</B>("RSA key fingerprint is "+k+".\n");<BR>
<B>if</B> (<B>ssh.auth</B>(conn, "username", "password")!=true) {<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>print</B>("failed auth");<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>exit</B>;<BR>
}<BR>
<FONT COLOR='green'>/*<BR>
&nbsp;* do something useful here<BR>
&nbsp;*/</FONT><BR>
<B>ssh.close</B>(conn);<BR>
</CODE></TD></TR></TABLE>
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c11p_lib_net_ssh_sftp_get" style="display: block"></div><div id="c11p_lib_net_ssh_sftp_ls" style="display: block"></div><div id="c11p_lib_net_ssh_sftp_mkdir" style="display: block"></div><div id="c11p_lib_net_ssh_sftp_put" style="display: block"></div><div id="c11p_lib_net_ssh_sftp_put_mem" style="display: block">This page is not here.</div><div id="c11p_lib_net_ssh_sftp_rename" style="display: block"></div><div id="c11p_lib_net_ssh_sftp_rmdir" style="display: block"></div><div id="c11p_lib_net_ssh_sftp_unlink" style="display: block"></div><div id="c11p_lib_net_tcp_socket" style="display: block"><!-- CONTENTS_START -->
<a name="nsp_tcp_socket"></a>
<H2>net.tcp.socket</H2><HR>

<H4>Description</H4>
<BLOCKQUOTE>
Returns an object that can be used as either a client or a listening socket.
</BLOCKQUOTE>

<H4>Methods</H4>
<BLOCKQUOTE>
<TABLE CLASS="METHODS" CELLPADDING=2 CELLSPACING=0>
<tr><th>Name</th><th>Description</th></tr>
<tr><td>bind</td><td>Binds a socket to the specified local host and port.</td></tr>
<tr><td>connect</td><td>Connects a socket to the specified remote host and port.</td></tr>
<tr><td>accept</td><td>Creates a new socket for incoming requests to a bound socket.</td></tr>
<tr><td>close</td><td>Closes a socket and destroys the socket object.</td></tr>
<tr><td>gets</td><td>Reads a line of text from an open socket.</td></tr>
<tr><td>read</td><td>Reads incoming data from an open socket.</td></tr>
<tr><td>write</td><td>Writes data to an open socket.</td></tr>
<tr><td>info</td><td>Returns information about an open socket.</td></tr>
</TABLE>
</BLOCKQUOTE>

<H4>Remarks</H4>
<BLOCKQUOTE>
None.
</BLOCKQUOTE>

<H4>Examples</H4>
<BLOCKQUOTE>
<TABLE CLASS="EXAMPLES">
<TR><TD>
<pre style="display:inline;"><FONT COLOR=GREEN><I>#!/usr/bin/nsp</I></FONT>
<B>function</B> test_http<FONT COLOR=MAROON><B>(</B></FONT><FONT COLOR=MAROON><B>)</B></FONT> <FONT COLOR=MAROON><B>{</B></FONT>
        print<FONT COLOR=MAROON><B>(</B></FONT><FONT COLOR=BLUE>"trying http://localhost:80/   - "</FONT><FONT COLOR=MAROON><B>)</B></FONT><FONT COLOR=MAROON><B>;</B></FONT>
        sock<FONT COLOR=MAROON><B>=</B></FONT><B>new</B> net<FONT COLOR=MAROON><B>.</B></FONT>tcp<FONT COLOR=MAROON><B>.</B></FONT>socket<FONT COLOR=MAROON><B>(</B></FONT><FONT COLOR=MAROON><B>)</B></FONT><FONT COLOR=MAROON><B>;</B></FONT>
        sock<FONT COLOR=MAROON><B>.</B></FONT>connect<FONT COLOR=MAROON><B>(</B></FONT><FONT COLOR=BLUE>"localhost"</FONT><FONT COLOR=MAROON><B>,</B></FONT> <FONT COLOR=NAVY>80</FONT><FONT COLOR=MAROON><B>,</B></FONT> false<FONT COLOR=MAROON><B>)</B></FONT><FONT COLOR=MAROON><B>;</B></FONT>
        <B>if</B> <FONT COLOR=MAROON><B>(</B></FONT>typeof<FONT COLOR=MAROON><B>(</B></FONT>sock<FONT COLOR=MAROON><B>.</B></FONT>socket<FONT COLOR=MAROON><B>)</B></FONT><FONT COLOR=MAROON><B>!=</B></FONT><FONT COLOR=BLUE>'sock4'</FONT><FONT COLOR=MAROON><B>)</B></FONT> <FONT COLOR=MAROON><B>{</B></FONT>
                print<FONT COLOR=MAROON><B>(</B></FONT><FONT COLOR=BLUE>"can't connect to http server\n"</FONT><FONT COLOR=MAROON><B>)</B></FONT><FONT COLOR=MAROON><B>;</B></FONT>
                <B>return</B><FONT COLOR=MAROON><B>;</B></FONT>
        <FONT COLOR=MAROON><B>}</B></FONT>
        o<FONT COLOR=MAROON><B>=</B></FONT>sock<FONT COLOR=MAROON><B>.</B></FONT>write<FONT COLOR=MAROON><B>(</B></FONT><FONT COLOR=BLUE>"GET / HTTP/1.0\r\n\r\n"</FONT><FONT COLOR=MAROON><B>)</B></FONT><FONT COLOR=MAROON><B>;</B></FONT>
        i<FONT COLOR=MAROON><B>=</B></FONT>sock<FONT COLOR=MAROON><B>.</B></FONT>gets<FONT COLOR=MAROON><B>(</B></FONT><FONT COLOR=MAROON><B>)</B></FONT><FONT COLOR=MAROON><B>;</B></FONT>
        printf<FONT COLOR=MAROON><B>(</B></FONT><FONT COLOR=BLUE>"[%s]\n"</FONT><FONT COLOR=MAROON><B>,</B></FONT> i<FONT COLOR=MAROON><B>)</B></FONT><FONT COLOR=MAROON><B>;</B></FONT>
        <B>do</B> <FONT COLOR=MAROON><B>{</B></FONT>
                i<FONT COLOR=MAROON><B>=</B></FONT>sock<FONT COLOR=MAROON><B>.</B></FONT>gets<FONT COLOR=MAROON><B>(</B></FONT><FONT COLOR=MAROON><B>)</B></FONT><FONT COLOR=MAROON><B>;</B></FONT>
        <FONT COLOR=MAROON><B>}</B></FONT> <B>while</B> <FONT COLOR=MAROON><B>(</B></FONT>i<FONT COLOR=MAROON><B>!=</B></FONT><FONT COLOR=BLUE>""</FONT><FONT COLOR=MAROON><B>)</B></FONT><FONT COLOR=MAROON><B>;</B></FONT>
        <B>do</B> <FONT COLOR=MAROON><B>{</B></FONT>
                i<FONT COLOR=MAROON><B>=</B></FONT>sock<FONT COLOR=MAROON><B>.</B></FONT>read<FONT COLOR=MAROON><B>(</B></FONT><FONT COLOR=MAROON><B>)</B></FONT><FONT COLOR=MAROON><B>;</B></FONT>
        <FONT COLOR=MAROON><B>}</B></FONT> <B>while</B> <FONT COLOR=MAROON><B>(</B></FONT>i<FONT COLOR=MAROON><B>!=</B></FONT><FONT COLOR=BLUE>""</FONT><FONT COLOR=MAROON><B>)</B></FONT><FONT COLOR=MAROON><B>;</B></FONT>
        sock<FONT COLOR=MAROON><B>.</B></FONT>close<FONT COLOR=MAROON><B>(</B></FONT><FONT COLOR=MAROON><B>)</B></FONT><FONT COLOR=MAROON><B>;</B></FONT>
<FONT COLOR=MAROON><B>}</B></FONT>
test_http<FONT COLOR=MAROON><B>(</B></FONT><FONT COLOR=MAROON><B>)</B></FONT><FONT COLOR=MAROON><B>;</B></FONT>
</pre>
</TD></TR></TABLE>
</BLOCKQUOTE>
<!-- CONTENTS_END -->
</div><div id="c11p_lib_net_tcp_accept" style="display: block"><hr><h3><a name="nsp_tcp_accept"><code>(sock4) tcp.accept(sock4 bindsock);</code></a></h3>
</div><div id="c11p_lib_net_tcp_bind" style="display: block"><hr><h3><a name="nsp_tcp_bind"><code>(sock4) tcp.bind(string host, number port, number ssl);</code></a></h3>
</div><div id="c11p_lib_net_tcp_close" style="display: block"><hr><h3><a name="nsp_tcp_close"><code>(number) tcp.close(sock4 socket);</code></a></h3>
</div><div id="c11p_lib_net_tcp_gets" style="display: block"><hr><h3><a name="nsp_tcp_gets"><code>(string) tcp.gets(sock4 socket);</code></a></h3>
</div><div id="c11p_lib_net_tcp_info" style="display: block"><hr><h3><a name="nsp_tcp_info"><code>(sock4) tcp.info(sock4 socket);</code></a></h3>
Returns a table containing information about the socket.
</div><div id="c11p_lib_net_tcp_open" style="display: block"><hr><h3><a name="nsp_tcp_open"><code>(sock4) tcp.open(string host, number port, number ssl);</code></a></h3>
</div><div id="c11p_lib_net_tcp_read" style="display: block"><hr><h3><a name="nsp_tcp_read"><code>(string) tcp.read(sock4 socket);</code></a></h3>
</div><div id="c11p_lib_net_tcp_write" style="display: block"><hr><h3><a name="nsp_tcp_write"><code>(number) tcp.write(sock4 socket, string str);</code></a></h3>
</div><div id=c12p0 style='display: block'>
<h1>12 - The C API</h1>
<p>
I'm lazy, so here's the long ugly version.  This is everything your C program
will ever need to know about Nesla.  Actually, it needs to know a lot less, but
hey.
</p>
<code class='c'>/*
    NESLA NullLogic Embedded Scripting Language
    Copyright (C) 2007-2023 Dan Cahill

    This program is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation; either version 2 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
    */
#ifndef _NSP_H
#define _NSP_H 1

#ifdef __cplusplus
extern "C" {
#endif

#define NSP_NAME      "nesla"
#define NSP_VERSION   "0.9.4"

#if defined(TINYCC)||defined(__TURBOC__)
struct timeval { long tv_sec; long tv_usec; };
struct timezone { int tz_minuteswest; int tz_dsttime; };
#endif
#if defined(_MSC_VER)
struct timezone { int tz_minuteswest; int tz_dsttime; };
#pragma warning(disable:4996)
#define WIN32_LEAN_AND_MEAN
//#define _USE_32BIT_TIME_T
/* always include winsock2 before windows */
#include <winsock2.h>
#include <windows.h>
#include <time.h>

#if defined(_WIN32) &amp;&amp; defined(_DEBUG)
#include <crtdbg.h>
#endif


#elif !defined(__TURBOC__)
#include <sys/time.h>
#include <stddef.h>
#endif
#include <setjmp.h>

/* need to add size sanity here */
typedef signed long long int   int64;
typedef unsigned long long int uint64;
#if defined(__TURBOC__)
typedef signed long int   int32;
typedef unsigned long int uint32;
#elif defined(_LP64)
typedef signed int        int32;
typedef unsigned int      uint32;
#else
typedef signed int        int32;
typedef unsigned int      uint32;
#endif
typedef signed char       int8;
typedef unsigned char     uint8;

#define MAX_OBJNAMELEN  64
#define MAX_OUTBUFSIZE  4096
#define OUTBUFLOWAT	2048

/* object types */
#define NT_NULL         0
#define NT_BOOLEAN      1
#define NT_NUMBER       2
#define NT_STRING       3
#define NT_NFUNC        4
#define NT_CFUNC        5
#define NT_TABLE        6
#define NT_CDATA        7

/* object status flags */
#define NST_HIDDEN	0x01
#define NST_READONLY	0x02
#define NST_SYSTEM	0x04
#define NST_AUTOSORT	0x08
#define NST_LINK	0x10
#define NST_STACKVAL	0x20

#define num_t double
#define uchar unsigned char
#define obj_t struct nsp_objrec
#define tab_t struct nsp_tablerec
#define val_t struct nsp_valrec
#define nsp_t struct nsp_state

/* should be typedef int(*NSP_CFUNC)(nsp_state *); */
typedef int(*NSP_CFUNC)(void *);
#define NSP_FUNCTION(name)    int name(nsp_state *N)
#define NSP_CLASS(name)       int name(nsp_state *N)
#define NSP_CLASSMETHOD(name) int name(nsp_state *N)

/*
 * define a callback function type so CDATA objects
 * can choose the terms of their own death.
 */
/* should be typedef void(*NSP_CFREE)(nsp_state *, obj_t *); */
typedef void(*NSP_CFREE)(void *, void *);

typedef struct NSP_CDATA {
	/* standard header info for CDATA object */
	char      obj_type[16]; /* tell us all about yourself in 15 characters or less */
	NSP_CFREE obj_term;     /* now tell us how to kill you */
	/* now begin the stuff that's type-specific */
} NSP_CDATA;
typedef struct nsp_tablerec {
	obj_t *f;
	obj_t *i;
	obj_t *l;
} nsp_tablerec;
typedef struct nsp_valrec {
	unsigned short type; /* val type */
	unsigned short attr; /* status flags (hidden, readonly, system, autosort, etc...) */
	unsigned short refs; /* number of references to this node */
	unsigned long  size; /* storage size of string, nfunc or cdata */
	obj_t *ztable;       /* 'z' table for hierarchical lookups */
	union {
		num_t  num;
		char  *str;
		NSP_CFUNC cfunc;
		NSP_CDATA *cdata;
		tab_t table;
	} d;
} nsp_valrec;
typedef struct nsp_objrec {
	obj_t *prev;
	obj_t *next;
	val_t *val;
	uint32 hash;
	signed long nval;
	char name[MAX_OBJNAMELEN + 1];
} nsp_objrec;
typedef struct nsp_execcontext {
	obj_t l; // local variables
	obj_t t; // 'this' object
	uchar *blockptr;
	uchar *blockend;
	uchar *readptr;
	uchar yielded;
	char *funcname;
	char *filename;
	char *tracefn;
	long int linenum;
} nsp_execcontext;
typedef struct nsp_state {
	jmp_buf *savjmp;
	nsp_execcontext *context; // local execution context
	obj_t g; // global variables
	obj_t r; // return variable
	short brk;
	short cnt;
	short ret;
	short err;
	short signal; /* intended for external signals to the parser.  for now, non-zero just means to shut down */
	short debug;
	short single;
	short yielded;
	short strict;
	short warnings;
	short maxwarnings;
	char warnformat;
	struct timeval ttime;
	char numbuf[128];
	char *outbuffer;
	unsigned short outbuflen;
	unsigned short outbufmax;
	char errbuf[256];
	/* debug info */
	long int allocs;
	long int allocmem;
	long int frees;
	long int freemem;
	long int peakmem;
	long int counter1;
} nsp_state;

#ifndef NSP_NOFUNCTIONS
/* exec */
nsp_state *nsp_newstate(void);
void       nsp_freestate(nsp_state *N);
nsp_state *nsp_endstate(nsp_state *N);
obj_t     *nsp_exec(nsp_state *N, const char *string);
int        nsp_execfile(nsp_state *N, char *file);
/* objects */
void       nsp_setvaltype(nsp_state *N, obj_t *cobj, unsigned short type);
void       nsp_linkval(nsp_state *N, obj_t *cobj1, obj_t *cobj2);
void       nsp_unlinkval(nsp_state *N, obj_t *cobj);
void       nsp_freetable(nsp_state *N, obj_t *tobj);
obj_t     *nsp_getobj_ex(nsp_state *N, obj_t *tobj, char *oname, unsigned short followz, unsigned short *foundz);
obj_t     *nsp_getobj(nsp_state *N, obj_t *tobj, char *oname);
obj_t     *nsp_getiobj(nsp_state *N, obj_t *tobj, unsigned long oindex);
obj_t     *nsp_setobj(nsp_state *N, obj_t *tobj, char *oname, unsigned short otype, NSP_CFUNC _fptr, num_t _num, char *_str, size_t _slen);
obj_t     *nsp_appendobj(nsp_state *N, obj_t *tobj, char *name);
void       nsp_strcat(nsp_state *N, obj_t *cobj, char *str, unsigned long len);
void       nsp_strmul(nsp_state *N, obj_t *cobj, unsigned long n);
short      nsp_tobool(nsp_state *N, obj_t *cobj);
num_t      nsp_tonum(nsp_state *N, obj_t *cobj);
char      *nsp_tostr(nsp_state *N, obj_t *cobj);
char      *nsp_zlink(nsp_state *N, obj_t *cobj1, obj_t *cobj2);
/* parser */
obj_t     *nsp_eval(nsp_state *N, const char *string);
obj_t     *nsp_evalf(nsp_state *N, const char *fmt, ...);
#endif

//#define    nsp_isnull(o)            (o==NULL||o->val==NULL||o->val->type==NT_NULL)
#define    nsp_isnull(o)            (o==NULL||o->val==NULL||o->val->type==NT_NULL)
#define    nsp_isbool(o)            (o!=NULL&amp;&amp;o->val!=NULL&amp;&amp;o->val->type==NT_BOOLEAN)
#define    nsp_isnum(o)             (o!=NULL&amp;&amp;o->val!=NULL&amp;&amp;o->val->type==NT_NUMBER)
#define    nsp_isstr(o)             (o!=NULL&amp;&amp;o->val!=NULL&amp;&amp;o->val->type==NT_STRING)
#define    nsp_istable(o)           (o!=NULL&amp;&amp;o->val!=NULL&amp;&amp;o->val->type==NT_TABLE)

#define    nsp_istrue(o)            (nsp_tobool(N, o)?1:0)

#define    nsp_typeof(o)            (nsp_isnull(o)?NT_NULL:o->val->type)

#define    nsp_getnum(N,o,n)        nsp_tonum(N, nsp_getobj(N,o,n))
#define    nsp_getstr(N,o,n)        nsp_tostr(N, nsp_getobj(N,o,n))

#define    nsp_setnull(N,t,n)       nsp_setobj(N, t, n, NT_NULL,    (NSP_CFUNC)NULL, 0, NULL, 0)
#define    nsp_setnum(N,t,n,v)      nsp_setobj(N, t, n, NT_NUMBER,  (NSP_CFUNC)NULL, v, NULL, 0)
#define    nsp_setbool(N,t,n,v)     nsp_setobj(N, t, n, NT_BOOLEAN, (NSP_CFUNC)NULL, v?1:0, NULL, 0)
#define    nsp_setstr(N,t,n,s,l)    nsp_setobj(N, t, n, NT_STRING,  (NSP_CFUNC)NULL, 0, s,    l)
#define    nsp_settable(N,t,n)      nsp_setobj(N, t, n, NT_TABLE,   (NSP_CFUNC)NULL, 0, NULL, 0)
#define    nsp_setcfunc(N,t,n,p)    nsp_setobj(N, t, n, NT_CFUNC,   (NSP_CFUNC)p,    0, NULL, 0)
#define    nsp_setnfunc(N,t,n,s,l)  nsp_setobj(N, t, n, NT_NFUNC,   (NSP_CFUNC)NULL, 0, s,    l)
#define    nsp_setcdata(N,t,n,s,l)  nsp_setobj(N, t, n, NT_CDATA,   (NSP_CFUNC)NULL, 0, (void *)s, l)

#define    nsp_setinum(N,t,n,v)     nsp_setiobj(N, t, n, NT_NUMBER, (NSP_CFUNC)NULL, v, NULL, 0)
#define    nsp_setistr(N,t,n,s,l)   nsp_setiobj(N, t, n, NT_STRING, (NSP_CFUNC)NULL, 0, s,    l)
#define    nsp_setitable(N,t,n)     nsp_setiobj(N, t, n, NT_TABLE,  (NSP_CFUNC)NULL, 0, NULL, 0)
#define    nsp_seticfunc(N,t,n,p)   nsp_setiobj(N, t, n, NT_CFUNC,  (NSP_CFUNC)p,    0, NULL, 0)
#define    nsp_setinfunc(N,t,n,s,l) nsp_setiobj(N, t, n, NT_NFUNC,  (NSP_CFUNC)NULL, 0, s,    l)
#define    nsp_seticdata(N,t,n,s,l) nsp_setiobj(N, t, n, NT_CDATA,  (NSP_CFUNC)NULL, 0, (void *)s, l)

#ifdef __cplusplus
}
#endif

#ifdef __cplusplus
class NesObject {
public:
	NesObject()
	{
		/* memset(O, 0, sizeof(O)); */
	}
	~NesObject()
	{
		/* nsp_unlink(O); */
	}
	const char *errbuf()
	{
		/* return this->N->errbuf; */
	}
private:
	obj_t O;
};

class NSPState {
private:
	nsp_state *N;
public:
	NSPState()
	{
		this->N=nsp_newstate();
	}
	~NSPState()
	{
		nsp_endstate(this->N);
	}
	obj_t *exec(const char *string)
	{
		return nsp_exec(this->N, string);
	}
	int execfile(char *file)
	{
		return nsp_execfile(this->N, file);
	}
	obj_t *eval(const char *string)
	{
		return nsp_eval(this->N, string);
	}
	/*
	obj_t *evalf(const char *fmt, ...)
	{
	return nsp_evalf(this->N, fmt, ...);
	}
	*/
	obj_t *getG()
	{
		return &amp;this->N->g;
	}
	obj_t *getT()
	{
		return &amp;this->N->context->t;
	}
	obj_t *getL()
	{
		return &amp;this->N->context->l;
	}
	nsp_t *getN()
	{
		return this->N;
	}
	void setdebug(int x)
	{
		this->N->debug=x;
	}
	int err()
	{
		return this->N->err;
	}
	int warnings()
	{
		return this->N->warnings;
	}
	const char *errbuf()
	{
		return this->N->errbuf;
	}
};
#endif

#endif /* _NSP_H */
</code>
</div>
 </div>
	<div id="footer">
		<table border=0 cellpadding=0 cellspacing=0 width="100%">
		<tr>
		<td>&nbsp;</td>
		<td align=left valign=bottom width="50%">
		<font face=arial color="#000000" size=-2>
		Please direct feedback to:<BR>
		<a href="mailto:nulllogic%40users.sourceforge.net">nulllogic@users.sourceforge.net</a>
		</font>
		</td><td align="right" valign="bottom" width="50%">
		<font face=arial color="#000000" size=-2>
		Copyright &copy; 2021 Dan Cahill<BR>
		All rights reserved
		</font>
		</td></tr>
		</table>
	</div>
</div>
<script language=javascript type="text/javascript">
showpage(1, 0);
FormatCodeDivs();
</script>
</body>
</html>
